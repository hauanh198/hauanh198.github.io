(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{2111:function(e,t,r){(function(e){var r,n,o,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,i=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":a(e))&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogisticPromotionRuleDiscountRuleFlag={REQUIRE_MIN_ORDER_TOTAL:16,REQUIRE_BUYER_LOCATION:32,REQUIRE_SELLER_LOCATION:64,HIDE_PROMOTION_RULE_FROM_DISPLAY:256,HIDE_PROMOTION_RULE_FROM_DISCOUNT_STRING_ONLY:512},t.LogisticPromotionRuleDiscountFlag={PERCENTAGE:1,FLAT_RATE:2,CAPPED:4,PERCENTAGE_WITH_CAP:8,ROUND_UP_DISCOUNTED_AMOUNT:65536,ROUND_DOWN_DISCOUNTED_AMOUNT:1<<17},t.LogisticPromotionRuleDiscountFlagComparisonModifier=65535,t.DB_PRICE_INFLATION_FACTOR=1e5,t.FEE_RANGE_SEPARATOR=" - ",t.LIST_SEPARATOR={ID:" / ",TW:"、",en:", ",zhHant:"、"},t.PHRASE_SEPARATOR={ID:" / ",TW:"; ",en:", ",zhHant:"; "},t.SENTENCE_SEPARATOR={ID:", ",TW:"，",en:", ",zhHant:"，"},t.DISCOUNT_DELTA_TYPE={DELTA_PERCENTAGE:1,DELTA_CAPPED:2,DELTA_FLAT_RATE:3,DISCOUNTED_AMOUNT:4,FREE_SHIPPING:5,DELTA_PERCENTAGE_WITH_CAP:6,QUALIFIED_FOR_SHIPPING_SUBSIDY:100},t.DISCOUNT_RULE_VARS_CALLER={DISCOUNT_STRING:2,DISCOUNT_HINT:4,CART_DISCOUNT_STRING:6,DETAILED_CART_DISCOUNT_INFO:8,DISCOUNT_PROMPT:10},t.ICON_HELP_MARKER="<IconHelp>",t.BREAK_LINE_MARKER="\n"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.groupBy=function(e,t){for(var r={},n=0;n<e.length;n++){var o=e[n],i=t(o);void 0!==i&&(r[i]||(r[i]=[]),r[i].push(o))}return r},t.unsafeTranslate=function(e){return function(t,r){return e(t,Object.assign({},r,{interpolation:{escapeValue:!1}}))}},t.highlight=function(e,t,r){var n=(""+t).replace(/[&<>"'\/]/g,function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}[e]});if(e.isReactNative||e.isReact)return'<View style="font-size: 14px; color: #ff5722;">'+n+"</View>";var o=o||"pl-c-primary";return'<span class="'+o+'">'+n+"</span>"},t.formatCurrencyWrapper=function(e,t,r){return e.hideUnnecessaryDecimalPlacesInAmount&&r%i.DB_PRICE_INFLATION_FACTOR==0?(0,n.formatCurrencyWithPrecision)(t,0,r):(0,o.default)(t,r)};var n=r(12),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyFilters=function(e,t,r){for(var n=void 0,o=0;o<r.length;o++)n=r[o],e=e.filter(function(e){for(var r=0;r<n.length;r++)if((0,n[r])(e,t))return!0;return!1});return e},t.isChannelSupported=function(e,t){return Object.keys(e.channels).indexOf(""+t.channelid)>=0},t.isShopSupported=function(e,t){return Object.keys(e.channels).filter(function(e){return-1!=Object.keys(t.shopEnabledChannelsData).indexOf(e)}).length>0},t.isLocationGroupSupported=function(e,t){var r=t.shopEnabledChannelsData,o=(e.extra_data.buyer_location_group_id,Object.keys(e.channels).filter(function(e){return Object.keys(r).indexOf(e)>=0}));if(o.length<=0)return!1;var i=(e.discount_rule_flag&n.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_BUYER_LOCATION)>0,a=(e.discount_rule_flag&n.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_SELLER_LOCATION)>0;return!(i&&!function(e,t,r){for(var n=0;n<e.length;n++){if((t[e[n]].buyerLocationGroupIds||[]).indexOf(r.extra_data.buyer_location_group_id)<0)return!1}return!0}(o,r,e)||a&&!function(e,t,r){for(var n=0;n<e.length;n++){if((t[e[n]].sellerLocationGroupIds||[]).indexOf(r.extra_data.seller_location_group_id)<0)return!1}return!0}(o,r,e))},t.isCapPromotion=function(e,t){return!!e&&e.discount_flag&n.LogisticPromotionRuleDiscountFlag.CAPPED},t.isFreeShippingPromotion=o,t.isShopeePromotion=function(e,t){return!!e&&0===e.shopId},t.isSellerPromotion=function(e,t){return!!e&&e.shopId>0},t.isSellerFreeShippingPromotion=function(e,t){return!!e&&e.shopid>0&&o(e,t)},t.isFreeShippingDiscountRuleVar=function(e,t){return!!e&&e.deltaType===n.DISCOUNT_DELTA_TYPE.FREE_SHIPPING},t.isFlatRateFreeShippingDiscountRuleVar=function(e,t){return!!e&&e.deltaType===n.DISCOUNT_DELTA_TYPE.FREE_SHIPPING&&(e.ruleFlag&n.LogisticPromotionRuleDiscountFlag.FLAT_RATE)>0},t.isCapDiscountRuleVar=function(e,t){return!!e&&(e.ruleFlag&n.LogisticPromotionRuleDiscountFlag.CAPPED)>0},t.isFlatRateDiscountRuleVar=function(e,t){return!!e&&e.ruleFlag===n.LogisticPromotionRuleDiscountFlag.FLAT_RATE};var n=r(0);function o(e,t){return!!e&&e.discount_flag&n.LogisticPromotionRuleDiscountFlag.FLAT_RATE&&0===e.discount_delta}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDiscountRuleVarsComparisonKey=function(e,t,r){var o=[];return(e&=n.LogisticPromotionRuleDiscountFlagComparisonModifier)&n.DISCOUNT_DELTA_TYPE.FREE_SHIPPING||e&n.DISCOUNT_DELTA_TYPE.QUALIFIED_FOR_SHIPPING_SUBSIDY?o.push(e,0):o.push(e,t),void 0!==r&&o.push(r),o.toString()},t.isSameDeltaType=function(e,t,r,o){return(e&n.LogisticPromotionRuleDiscountFlagComparisonModifier)==(r&n.LogisticPromotionRuleDiscountFlagComparisonModifier)&&(!!(e&n.DISCOUNT_DELTA_TYPE.FREE_SHIPPING||e&n.DISCOUNT_DELTA_TYPE.QUALIFIED_FOR_SHIPPING_SUBSIDY)||t===o)},t.calculateDiscountedFee=i,t.getEstimatedShippingFee=a,t.getMostAttractiveRule=function(e,t){var r=void 0;return e.forEach(function(e){(null==r||r.discountedFee>e.discountedFee||r.discountedFee===e.discountedFee&&r.minOrderTotal>e.minOrderTotal)&&(r=e)}),r},t.getDiscountRuleVars=function(e,t,r,o,u){for(var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=void 0,p=void 0,_=void 0,f=!1,d=[],g=0;g<u.length;g++){var h=u[g],R=o[h];d.push(a(t,h,R))}var D=Math.min.apply(Math,d),y=i(r,D);if(e.showDiscountedFee)c=0===(p=y)?n.DISCOUNT_DELTA_TYPE.FREE_SHIPPING:n.DISCOUNT_DELTA_TYPE.DISCOUNTED_AMOUNT;else if(e.showFreeShippingInsteadOfDelta)c=n.DISCOUNT_DELTA_TYPE.FREE_SHIPPING,p=0;else if(e.showFreeShippingInsteadOfDeltaForCap&&r.discount_flag&n.LogisticPromotionRuleDiscountFlag.CAPPED)c=n.DISCOUNT_DELTA_TYPE.FREE_SHIPPING,p=0;else{p=r.discount_delta,l!==n.DISCOUNT_RULE_VARS_CALLER.CART_DISCOUNT_STRING&&l!==n.DISCOUNT_RULE_VARS_CALLER.DETAILED_CART_DISCOUNT_INFO&&(s&&e.showFreeShippingForDeltaIfFree__crossBorder&&!(e.doNotShowFreeShippingForDiscountStringIfNoTiersMet__crossBorder&&D===y)||!s&&e.showFreeShippingForDeltaIfFree)&&0==y||l===n.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_STRING&&e.showFreeShippingInsteadOfDeltaForCapForDiscountStringOnly?c=n.DISCOUNT_DELTA_TYPE.FREE_SHIPPING:l===n.DISCOUNT_RULE_VARS_CALLER.CART_DISCOUNT_STRING&&e.showQualifiedForShippingSubsidyInsteadOfDeltaForCartDiscountStringOnly||l===n.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_PROMPT&&e.showQualifiedForShippingSubsidyInsteadOfDeltaForDiscountPromptOnly?c=n.DISCOUNT_DELTA_TYPE.QUALIFIED_FOR_SHIPPING_SUBSIDY:r.discount_flag&n.LogisticPromotionRuleDiscountFlag.PERCENTAGE?c=n.DISCOUNT_DELTA_TYPE.DELTA_PERCENTAGE:r.discount_flag&n.LogisticPromotionRuleDiscountFlag.CAPPED?c=n.DISCOUNT_DELTA_TYPE.DELTA_CAPPED:r.discount_flag&n.LogisticPromotionRuleDiscountFlag.FLAT_RATE?c=n.DISCOUNT_DELTA_TYPE.DELTA_FLAT_RATE:r.discount_flag&n.LogisticPromotionRuleDiscountFlag.PERCENTAGE_WITH_CAP&&(c=n.DISCOUNT_DELTA_TYPE.PERCENTAGE_WITH_CAP)}return r.discount_rule_flag&n.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_MIN_ORDER_TOTAL&&(_=r.extra_data.min_order_total),r.discount_rule_flag&n.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_BUYER_LOCATION&&(f=!0),{deltaType:c,delta:p,minOrderTotal:_,channelids:u,extra:r.extra_data,priority:r.priority,discountedFee:y,requireBuyerLocation:f,shopId:r.shopid,ruleFlag:r.discount_flag}},t.generateDiscountDeltaPhrase=function(e,t,r,i,a){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=void 0,c=e.highlightPromotionFees?(0,o.unsafeTranslate)(r):r,p=e.highlightPromotionFees?function(e,t,r){return(0,o.highlight)(e,(0,o.formatCurrencyWrapper)(e,t,r))}:o.formatCurrencyWrapper;switch(i){case n.DISCOUNT_DELTA_TYPE.DELTA_PERCENTAGE:l=c("msg_promotion__delta__percentage",{delta:e.highlightPromotionFees?(0,o.highlight)(e,a):a});break;case n.DISCOUNT_DELTA_TYPE.DELTA_CAPPED:if(s===n.DISCOUNT_RULE_VARS_CALLER.DETAILED_CART_DISCOUNT_INFO)l=p(e,t,a);else l=c(e.showCappedDeltaWithUpTo?"msg_promotion__delta__capped__up_to":"msg_promotion__delta__capped",{delta:p(e,t,a)});break;case n.DISCOUNT_DELTA_TYPE.DELTA_FLAT_RATE:l=c("msg_promotion__delta__flat_rate",{delta:p(e,t,a)});break;case n.DISCOUNT_DELTA_TYPE.FREE_SHIPPING:l=c("msg_promotion__delta__free_shipping"),l=e.highlightPromotionFees?(0,o.highlight)(e,l):l;break;case n.DISCOUNT_DELTA_TYPE.DISCOUNTED_AMOUNT:l=c("msg_promotion__delta__discounted_amount",{delta:p(e,t,a)});break;case n.DISCOUNT_DELTA_TYPE.PERCENTAGE_WITH_CAP:l=c(s===n.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_STRING&&e.hideCapForPercentageWithCapForDiscountString||s===n.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_HINT&&e.hideCapForPercentageWithCapForDiscountHint||s===n.DISCOUNT_RULE_VARS_CALLER.CART_DISCOUNT_STRING&&e.hideCapForPercentageWithCapForCartDiscountString?"msg_promotion__delta__percentage":"msg_promotion__delta__percentage_with_cap",{delta:a,cap:p(e,t,u.percentage_discount_cap)});break;case n.DISCOUNT_DELTA_TYPE.QUALIFIED_FOR_SHIPPING_SUBSIDY:l=c("msg_promotion__delta__qualified_for_shipping_subsidy");break;default:l=""}return l},t.filterPromotionRules=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=[];r=r||[],o=o||[];for(var u=0;u<e.length;u++){var s=e[u];Object.keys(s.channels).indexOf(""+t)<0||s.discount_rule_flag&n.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_BUYER_LOCATION&&r.indexOf(s.extra_data.buyer_location_group_id)<0&&!i||s.discount_rule_flag&n.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_SELLER_LOCATION&&o.indexOf(s.extra_data.seller_location_group_id)<0||a.push(s)}return a},t.filterPromotionRulesByShopEnabledChannelsData=function(e,t,r){for(var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[],a=0;a<e.length;a++){var u=e[a];if((void 0===r||r(u))&&!(u.discount_rule_flag&n.LogisticPromotionRuleDiscountRuleFlag.HIDE_PROMOTION_RULE_FROM_DISPLAY)&&(u.affectedChannelIds=Object.keys(u.channels).filter(function(e){return-1!=Object.keys(t).indexOf(e)}),0!==u.affectedChannelIds.length)){if(u.discount_rule_flag&n.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_BUYER_LOCATION){for(var s=!1,l=0;l<u.affectedChannelIds.length;l++){var c=u.affectedChannelIds[l];if((t[c].buyerLocationGroupIds||[]).indexOf(u.extra_data.buyer_location_group_id)<0&&!o){s=!0;break}}if(s)continue}if(u.discount_rule_flag&n.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_SELLER_LOCATION){for(var p=!1,_=0;_<u.affectedChannelIds.length;_++){var f=u.affectedChannelIds[_];if((t[f].sellerLocationGroupIds||[]).indexOf(u.extra_data.seller_location_group_id)<0){p=!0;break}}if(p)continue}i.push(u)}}return i};var n=r(0),o=r(1);function i(e,t){var r=t;if(e.discount_flag&n.LogisticPromotionRuleDiscountFlag.PERCENTAGE?r=t*(100-e.discount_delta)/100:e.discount_flag&n.LogisticPromotionRuleDiscountFlag.FLAT_RATE?r=e.discount_delta:e.discount_flag&n.LogisticPromotionRuleDiscountFlag.CAPPED?r=t-Math.min(t,e.discount_delta):e.discount_flag&n.LogisticPromotionRuleDiscountFlag.PERCENTAGE_WITH_CAP&&(r=t-Math.min(t*e.discount_delta/100,e.extra_data.percentage_discount_cap)),e.discount_flag&n.LogisticPromotionRuleDiscountFlag.ROUND_UP_DISCOUNTED_AMOUNT){var o=e.extra_data.discount_rounding_factor,i=r%o;i&&(r+=o-i)}else if(e.discount_flag&n.LogisticPromotionRuleDiscountFlag.ROUND_DOWN_DISCOUNTED_AMOUNT){var a=r%e.extra_data.discount_rounding_factor;a&&(r-=a)}return r}function a(e,t,r){return void 0!==r.estimatedShippingFee?r.estimatedShippingFee:e[t]?e[t].minimum_cost:0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDisplay=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1),i=r(3),a=r(0),u=r(2),s=r(5),l=r(7),c=r(15);t.BaseDisplay=function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.countryCode=r,this.languageCode=n,this.trans=t.HIGHLIGHT_MBS_FOR_CHANNEL_DISPLAY||t.HIGHLIGHT_DELTA_AMOUNT_FOR_CHANNEL_DISPLAY?(0,o.unsafeTranslate)(i):i}return n(e,[{key:"getDummyFilters",value:function(){return[[function(e,t){return e}]]}},{key:"getDummyPreprocessorFunction",value:function(){return function(e,t){return e}}},{key:"getParams",value:function(){return{preProcessingStopConditions:this.getPreProcessingStopConditions(),rulesPreprocessors:this.getRulesPreprocessors(),postProcessingStopConditions:this.getPostProcessingStopConditions(),hintGenerator:this.getHintGenerator().bind(this)}}},{key:"getPreProcessingStopConditions",value:function(){return[s.hasNoPromotion]}},{key:"getRulesPreprocessors",value:function(){var e=this;return[function(t,r){return(0,u.applyFilters)(t,r,e.getPromotionRulesFilters())},function(t,r){return e.getPromotionRulesFormatter()(e.config,t,r)},function(t,r){return(0,u.applyFilters)(t,r,e.getDiscountRuleVarsFilters())},function(t,r){return t.sort(e.getDiscountRuleVarsSorter())},function(t,r){return e.getDiscountRuleVarsReverser()(t,r)},function(t,r){return e.getDiscountRuleVarsSplitter()(t,r)}]}},{key:"getPostProcessingStopConditions",value:function(){return[s.hasNoDiscountRuleVar]}},{key:"getDiscountRuleVarsSplitter",value:function(){return this.getDummyPreprocessorFunction()}},{key:"getPromotionRulesFormatter",value:function(){return c.formatRuleToDiscountRuleVars}},{key:"getPromotionRulesFilters",value:function(){return[[u.isChannelSupported,u.isShopSupported],[u.isLocationGroupSupported]]}},{key:"getDiscountRuleVarsFilters",value:function(){return[[u.isCapDiscountRuleVar,u.isFreeShippingDiscountRuleVar,u.isFlatRateDiscountRuleVar]]}},{key:"getDiscountRuleVarsSorter",value:function(){return l.sortDiscountRuleVarsByMBSAndPriority}},{key:"getDiscountRuleVarsReverser",value:function(){return function(e,t){return e.reverse()}}},{key:"getHintGenerator",value:function(){return function(){}}},{key:"getCountrySpecificTransifyKey",value:function(e){return this.config.countrySpecificRulesetString?e+"__"+this.countryCode:e}},{key:"applyPreprocessors",value:function(e,t,r){for(var n=e.slice(),o=0;o<r.length;o++)n=(0,r[o])(n,t);return n}},{key:"process",value:function(e,t,r,n,o,i){if((0,s.applyStopConditions)({promotionRules:t},e.preProcessingStopConditions))return"";var u=this.applyPreprocessors(t,{shopEnabledChannelsData:r,channels:n,channelid:o,orderTotal:i},e.rulesPreprocessors);if(u.length<=0)return"";if((0,s.applyStopConditions)({discountRuleVars:u,orderTotal:i},e.postProcessingStopConditions))return"";for(var l=e.hintGenerator({preprocessedPromotions:u,orderTotal:i}),c=[],p=void 0,_=0;_<l.length;_++)if((p=l[_]).rulePhraseData){var f=this.translateHints(p.rulePhraseData);if(f.join(a.PHRASE_SEPARATOR[this.languageCode]).length<=0)return"";p.rulesetData.transifyData.rulePhrases=f,c.push(this.trans(p.rulesetData.transifyKey,p.rulesetData.transifyData))}return c.join(a.BREAK_LINE_MARKER)}},{key:"translateHints",value:function(e){var t=this;return e.map(function(e){var r=e.discountRuleVar,n=e.transifyKey,o=e.transifyData||{};return o.useFreeShippingPhrase&&(r.deltaType=a.DISCOUNT_DELTA_TYPE.FREE_SHIPPING),o.deltaPhrase=(0,i.generateDiscountDeltaPhrase)(t.config,t.countryCode,t.trans,r.deltaType,r.delta),t.trans(n,o)})}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyStopConditions=function(e,t){for(var r=0;r<t.length;r++)if((0,t[r])(e))return!0;return!1},t.hasNoPromotion=function(e){return(e.promotionRules||[]).length<=0},t.canApplyHighestMBSDiscountRuleVars=function(e){var t=e.discountRuleVars||[];return t.length<=0||(e.orderTotal||0)>=t[0].minOrderTotal},t.canApplyFSPromotion=function(e){var t=e.discountRuleVars||[];if(t.length<=0)return!1;var r=e.orderTotal||0;return t.filter(function(e){return e.deltaType===n.DISCOUNT_DELTA_TYPE.FREE_SHIPPING}).filter(function(e){return r>=e.minOrderTotal}).length>0},t.hasNoDiscountRuleVar=function(e){return(e.discountRuleVars||[]).length<=0},t.canApplyFlatRateFSPromotion=function(e,t){var r=e.discountRuleVars||[];if(r.length<=0)return!1;var o=e.orderTotal||0,i=r.filter(function(e){return e.deltaType===n.DISCOUNT_DELTA_TYPE.FREE_SHIPPING&&(e.ruleFlag&n.LogisticPromotionRuleDiscountFlag.FLAT_RATE)>0});return t&&(i=i.filter(function(e){return o>=e.minOrderTotal})),i.length>0};var n=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.groupDiscountVarsByMBS=function(e){return(0,n.groupBy)(e,function(e){return e.minOrderTotal||0})},t.sortArrayByValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.slice().sort(function(e,t){return e-t});return t&&(r=r.reverse()),r},t.getPromotionChannelIds=function(e,t){return e&&t?Object.keys(e.channels).filter(function(e){return-1!=Object.keys(t).indexOf(e)}):[]};var n=r(1);r(0),r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortDiscountRuleVarsByMBSAndPriority=function(e,t){return e.minOrderTotal<t.minOrderTotal?-1:e.minOrderTotal>t.minOrderTotal?1:e.priority<t.priority?-1:e.priority>t.priority?1:0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConfigByCountry=function(e){return n[e]};var n={VN:{showActualShippingFeeInsteadOfPossibleRange:!0,showFreeShippingForDeltaIfFree:!0,ENABLE_MODULAR_PROCESSING:!0,USE_GREEN_TRUCK_STRING_FOR_CART:!0,ALWAYS_USE_FREE_SHIPPING_FOR_DELTA_PHRASE:!0,ADD_ICON_HELP_ON_GREEN_TRUCK_HINT:!0,HIGHLIGHT_MBS_FOR_CHANNEL_DISPLAY:!0,HIGHLIGHT_DELTA_AMOUNT_FOR_CHANNEL_DISPLAY:!0},ID:{},TH:{},PH:{},TW:{},MY:{},SG:{}}},function(e,t,r){e.exports=r(10)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(1),i=r(3),a=r(13),u=r(8);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function c(){function e(e,t,r,c,p){var _=this;return p=Object.assign({},p,(0,u.getConfigByCountry)(e)),this.generateShopChannelDataParameters=function(e){for(var t={},r=0;r<e.length;r++){var n={};e[r].error||(void 0!==e[r].original_cost?(n.estimatedShippingFee=e[r].original_cost,n.discountedShippingFee=e[r].cost):n.estimatedShippingFee=n.discountedShippingFee=e[r].cost,n.locationGroupId=e[r].location_group_id,n.buyerLocationGroupIds=e[r].buyer_location_group_ids,n.sellerLocationGroupIds=e[r].seller_location_group_ids,n.warning=e[r].warning,t[e[r].channel.channelid]=n)}return t},this.generateChannelShippingFeeDisplayData=function(t,r,a){if(0===a.estimatedShippingFee)return{estimatedShippingFeeString:(0,o.formatCurrencyWrapper)(p,e,0),possibleShippingFees:[0]};var u=(0,i.filterPromotionRules)(t,r,a.buyerLocationGroupIds,a.sellerLocationGroupIds).map(function(e){return(0,i.calculateDiscountedFee)(e,a.estimatedShippingFee)});if(p.removeRulesForDiscountHintProducesHigherShippingFee&&(u=u.filter(function(e){return e<=a.discountedShippingFee})),0===u.length)return{estimatedShippingFeeString:(0,o.formatCurrencyWrapper)(p,e,a.estimatedShippingFee),possibleShippingFees:[a.estimatedShippingFee]};var s=Math.min.apply(Math,l(u)),_=(Math.max.apply(Math,l(u)),{}),f=[];return a.discountedShippingFee===a.estimatedShippingFee?(_.estimatedShippingFeeString=[(0,o.formatCurrencyWrapper)(p,e,s),(0,o.formatCurrencyWrapper)(p,e,a.estimatedShippingFee)].join(n.FEE_RANGE_SEPARATOR),f.push(s),f.push(a.discountedShippingFee)):s===a.discountedShippingFee?(_.estimatedShippingFeeString=(0,o.formatCurrencyWrapper)(p,e,a.estimatedShippingFee),_.discountedShippingFeeString=(0,o.formatCurrencyWrapper)(p,e,s),f.push(s)):(_.estimatedShippingFeeString=(0,o.formatCurrencyWrapper)(p,e,a.estimatedShippingFee),_.discountedShippingFeeString=[(0,o.formatCurrencyWrapper)(p,e,s),(0,o.formatCurrencyWrapper)(p,e,a.discountedShippingFee)].join(n.FEE_RANGE_SEPARATOR),f.push(s),f.push(a.discountedShippingFee)),p.showActualShippingFeeInsteadOfPossibleRange&&(_.estimatedShippingFeeString&&(_.estimatedShippingFeeString=0===a.estimatedShippingFee?c("label_free_shipping_cap"):(0,o.formatCurrencyWrapper)(p,e,a.estimatedShippingFee)),_.discountedShippingFeeString&&(_.discountedShippingFeeString=0===a.discountedShippingFee?c("label_free_shipping_cap"):(0,o.formatCurrencyWrapper)(p,e,a.discountedShippingFee))),_.possibleShippingFees=f,_},this.generateDiscountString=function(u,s){u=Object.assign({crossBorder:!1,orderTotal:0,simpleMode:!1,fromCart:!1,fromPrompt:!1,showFreeShippingVoucherRequired:!1},u);var _=Object.assign({},p,s);if(_.ENABLE_MODULAR_PROCESSING)return(0,a.generateProductGreenTruckDiscountString)(_,e,t,c,u.promotionRules,u.shopEnabledChannelsData,r,0,u.orderTotal);if(!u.simpleMode&&(u.crossBorder&&_.showFreeShippingForDiscountStringIfFree__crossBorder||!u.crossBorder&&_.showFreeShippingForDiscountStringIfFree)&&Object.keys(u.shopEnabledChannelsData).map(function(e){return u.shopEnabledChannelsData[e]}).some(function(e){return 0===e.discountedShippingFee}))return c("label_free_shipping_cap");for(var f=[],d=u.fromCart?n.DISCOUNT_RULE_VARS_CALLER.CART_DISCOUNT_STRING:u.fromPrompt?n.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_PROMPT:n.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_STRING,g=(0,i.filterPromotionRulesByShopEnabledChannelsData)(u.promotionRules,u.shopEnabledChannelsData,function(e){return u.fromPrompt||!(e.discount_rule_flag&n.LogisticPromotionRuleDiscountRuleFlag.HIDE_PROMOTION_RULE_FROM_DISCOUNT_STRING_ONLY)},!!p.ignoreBuyerLocationGroupCheckOnDiscountStringGeneration),h=0;h<g.length;h++){var R=g[h];f.push((0,i.getDiscountRuleVars)(p,r,R,u.shopEnabledChannelsData,R.affectedChannelIds,u.crossBorder,d))}_.alwaysShowMostAttractiveTierForDiscountString&&(f=f.length?[(0,i.getMostAttractiveRule)(f,_)]:[]);var D=(0,o.groupBy)(f,function(e){return(e.minOrderTotal||0).toString()}),y=Object.keys(D).map(function(e){return parseInt(e,10)}).sort(function(e,t){return e-t});if(!_.alwaysShowMostAttractiveTierForDiscountString)if(_.hideSupersededTiersForDiscountString){var S=y.findIndex(function(e){return u.orderTotal<e});if(S<0)y=y.slice(-1);else{var T=S-1;T>0&&(y=y.slice(T))}}else _.alwaysShowHighestTierForDiscountString&&(y=y.slice(-1));var m=[],P=function(){var a=y[h],s=D[a],f=(0,o.groupBy)(s,function(e){return(0,i.getDiscountRuleVarsComparisonKey)(e.deltaType,e.delta)}),g=Object.keys(f).sort(function(e,t){return Math.min.apply(Math,l(f[e][0].priority))-Math.min.apply(Math,l(f[t][0].priority))});if(!_.allowDifferentDeltaUnderSameMinimumOrderTotalForDiscountString&&g.length>1)return"continue";for(E=0;E<g.length;E++){var R=f[g[E]];if(!_.onlyDisplayFreeShippingForDiscountString||(0===R[0].discountedFee&&(R[0].deltaType=n.DISCOUNT_DELTA_TYPE.FREE_SHIPPING),R[0].deltaType===n.DISCOUNT_DELTA_TYPE.FREE_SHIPPING)){var S,T=(0,i.generateDiscountDeltaPhrase)(p,e,c,R[0].deltaType,R[0].delta,R[0].extra,d),P=R.map(function(e){return e.channelids.map(function(e){return r[e]?r[e].name:""})}).reduce(function(e,t){return e.concat(t)},[]).join(n.LIST_SEPARATOR[t]),O=[["msg_promotion__rule__order_total"],_.useNewDiscountStringWithLocationGroupNameLabel&&R[0].extra.buyer_location_group_id>0?["location_group"]:[],u.simpleMode||_.hideChannelNamesInDiscountString?["simple"]:[],_.useCountrySpecificRuleString?[e]:[]].filter(function(e){return e.length}).join("__");S=c(O,{deltaPhrase:T,minOrderTotal:(0,o.formatCurrencyWrapper)(p,e,a),channelNames:P,shopName:u.shopName,buyerLocationGroupName:R[0].extra.buyer_location_group_name||""}),_.onlyDisplayOneFreeShippingWithMinimumMinOrderTotalForDiscountString&&m.length||m.push(S)}}};for(h=0;h<y.length;h++){var E;P()}if(0===m.length)return"";var O=m.join(n.PHRASE_SEPARATOR[t]),C=[["msg_promotion__ruleset"],u.showFreeShippingVoucherRequired?["fsv"]:[],u.simpleMode?["simple"]:[],_.countrySpecificRulesetString?[e]:[]].filter(function(e){return e.length}).join("__");return c(C,{rulePhrases:O,shopName:u.shopName})},this.generateChannelDiscountHint=function(u,l,_,f,d){var g=[],h=_.buyerLocationGroupIds||[];if(p.ENABLE_MODULAR_PROCESSING)return(0,a.generateChannelDiscountHint)(p,e,t,c,u,_,l,r);if(0===_.discountedShippingFee&&!p.displayHighestTierIfAllClearedForHint)return"";if(p.hideAddressNotSupportedChannelForChannelDiscountHint&&_.warning&&("unsupported_address"===_.warning||"channel_unavailable"===_.warning))return"";var R=(0,i.filterPromotionRules)(u,l,_.buyerLocationGroupIds,_.sellerLocationGroupIds,!!p.ignoreBuyerLocationGroupCheckOnDiscountStringGeneration).slice().reverse().filter(function(e){return!(e.discount_rule_flag&n.LogisticPromotionRuleDiscountRuleFlag.HIDE_PROMOTION_RULE_FROM_DISPLAY)}).filter(function(e){return e.discount_rule_flag&n.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_MIN_ORDER_TOTAL}).map(function(e){return(0,i.getDiscountRuleVars)(p,r,e,s({},l,_),[l],d,n.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_HINT)}).sort(function(e,t){var r=e.minOrderTotal-t.minOrderTotal;return 0===r?e.discountedFee-t.discountedFee:r});p.removeRulesForDiscountHintProducesHigherShippingFee&&(R=R.filter(function(e){return e.discountedFee<_.discountedShippingFee}));for(var D=R[0],y=p.highlightPromotionFees?(0,o.unsafeTranslate)(c):c,S=0;S<R.length;S++){var T=R[S];if(!(T.discountedFee>=D.discountedFee&&0!==S)&&(D=T,!(f>=T.minOrderTotal)||p.displayHighestTierIfAllClearedForHint&&S==R.length-1||p.useLocationNotSupportedChannelDiscountHint)){var m=(0,i.generateDiscountDeltaPhrase)(p,e,c,T.deltaType,T.delta,T.extra,n.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_HINT),P=void T.extra.buyer_location_group_id;T.requireBuyerLocation&&h.indexOf(T.extra.buyer_location_group_id)<0&&p.useLocationNotSupportedChannelDiscountHint?P="msg_promotion__hint__location_not_supported":(P="msg_promotion__hint__order_total__"+e,P+=d?"__cb":"");var E=(0,o.formatCurrencyWrapper)(p,e,T.minOrderTotal),O=y(P,{deltaPhrase:m,minOrderTotal:p.highlightPromotionFees?(0,o.highlight)(p,E):E});if(p.isReactNative||p.isReact?g.push(O):g.push('<span class="pl-promotion">'+O+"</span>"),(d&&p.hideNextTierIfCurrentTierIsFreeShippingForDiscountHint__crossBorder&&!p.showAllTiersRegardlessIfNoTiersMetForDiscountHint__crossBorder||!d&&p.hideNextTierIfCurrentTierIsFreeShippingForDiscountHint)&&0===T.discountedFee)break}}return g.length>0?p.showNextTierOnlyForDiscountHint?"("+g[0]+")":p.showHighestTierOnlyForDiscountHint?"("+g[g.length-1]+")":"("+g.join(n.LIST_SEPARATOR[t])+")":""},this.generateCartDiscountString=function(u){if(p.hideCartDiscountString)return"";if(p.ENABLE_MODULAR_PROCESSING)return(0,a.generateCartDiscountString)(p,e,t,c,u.promotionRules,u.shopEnabledChannelsData,r,u.orderTotal);if(p.showDetailedDiscountInfoForCartDiscount){if(!u.promotionRules.length)return"";var s=u.promotionRules.filter(function(e){return e.discount_rule_flag&n.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_MIN_ORDER_TOTAL}).sort(function(e,t){return e.extra_data.min_order_total+e.priority-(t.extra_data.min_order_total+t.priority)});if(s.length<=0)return"";var l=s[0],f=Object.keys(l.channels).filter(function(e){return-1!=Object.keys(u.shopEnabledChannelsData).indexOf(e)}),d=(0,i.getDiscountRuleVars)(p,r,l,u.shopEnabledChannelsData,f,u.crossBorder,n.DISCOUNT_RULE_VARS_CALLER.CART_DISCOUNT_STRING),g=(0,i.generateDiscountDeltaPhrase)(p,e,c,d.deltaType,d.delta,d.extra,n.DISCOUNT_RULE_VARS_CALLER.CART_DISCOUNT_STRING);return c("msg_promotion__cart__order_total__"+e,{deltaPhrase:g,minOrderTotal:(0,o.formatCurrencyWrapper)(p,e,d.minOrderTotal)})}return u.fromCart=!0,p.alwaysShowMostAttractiveTierForCartDiscountString?_.generateDiscountString(u,{alwaysShowMostAttractiveTierForDiscountString:!0,onlyDisplayFreeShippingForDiscountString:!1}):p.alwaysShowHighestTierForCartDiscountString?_.generateDiscountString(u,{alwaysShowHighestTierForDiscountString:!0,onlyDisplayFreeShippingForDiscountString:!1}):_.generateDiscountString(u,{alwaysShowHighestTierForDiscountString:!1})},this.generateDetailedCartDiscountInfo=function(t){for(var a=(0,i.filterPromotionRulesByShopEnabledChannelsData)(t.promotionRules,t.shopEnabledChannelsData,void 0,!!p.ignoreBuyerLocationGroupCheckOnDiscountStringGeneration),u=[],s=0;s<a.length;s++){var _=a[s];u.push((0,i.getDiscountRuleVars)(p,r,_,t.shopEnabledChannelsData,_.affectedChannelIds,t.crossBorder,n.DISCOUNT_RULE_VARS_CALLER.CART_DISCOUNT_STRING))}var f=(0,o.groupBy)(u,function(e){return(e.minOrderTotal||0).toString()}),d=Object.keys(f).map(function(e){return parseInt(e,10)}).sort(function(e,t){return e-t}),g=[],h=function(){var t=d[s],a=f[t],u=(0,o.groupBy)(a,function(e){return(0,i.getDiscountRuleVarsComparisonKey)(e.deltaType,e.delta)}),_=Object.keys(u).sort(function(e,t){return Math.min.apply(Math,l(u[e][0].priority))-Math.min.apply(Math,l(u[t][0].priority))});for(R=0;R<_.length;R++){var h=u[_[R]];g.push({minOrderTotal:(0,o.formatCurrencyWrapper)(p,e,t),deltaPhrase:(0,i.generateDiscountDeltaPhrase)(p,e,c,h[0].deltaType,h[0].delta,h[0].extra,n.DISCOUNT_RULE_VARS_CALLER.DETAILED_CART_DISCOUNT_INFO),channelNames:h.map(function(e){return e.channelids}).reduce(function(e,t){return e.concat(t)}).sort().reduce(function(e,t){return 0!=e.length&&e[e.length-1]==t||e.push(t),e},[]).map(function(e){return r[e].name}).reduce(function(e,t){return e.concat(t)},[])})}};for(s=0;s<d.length;s++){var R;h()}return{shopName:t.shopName,ruleVars:g}},this.generateDiscountPrompt=function(u,l,f,d,g,h){if(p.hideDiscountPrompt)return"";if(p.ENABLE_MODULAR_PROCESSING){var R=s({},f,d);return(0,a.generateDiscountPrompt)(p,e,t,c,u,R,r,f,g)}if(!p.displayHighestTierIfAllClearedForPrompt&&0===d.discountedShippingFee)return"";if(p.useDiscountStringForPrompt||p.useSimpleDiscountStringForPrompt){var D={};return D[f]=d,_.generateDiscountString({promotionRules:u,shopName:l,shopEnabledChannelsData:D,crossBorder:h,orderTotal:g,simpleMode:p.useSimpleDiscountStringForPrompt,fromPrompt:!0})}for(var y=[],S=(0,i.filterPromotionRules)(u,f,d.buyerLocationGroupIds,d.sellerLocationGroupIds).slice().reverse(),T=0;T<S.length;T++){var m=S[T];if(!(m.discount_rule_flag&n.LogisticPromotionRuleDiscountRuleFlag.HIDE_PROMOTION_RULE_FROM_DISPLAY)&&m.discount_rule_flag&n.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_MIN_ORDER_TOTAL){var P=(0,i.getDiscountRuleVars)(p,r,m,s({},f,d),[f],h,n.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_PROMPT);if(!(g>=P.minOrderTotal&&(!p.displayHighestTierIfAllClearedForPrompt||T<S.length-1))){var E=(0,i.generateDiscountDeltaPhrase)(p,e,c,P.deltaType,P.delta,P.extra,n.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_PROMPT),O=P.channelids.map(function(e){return r[e]?r[e].name:""}).join(n.LIST_SEPARATOR[t]),C=p.useNewDiscountStringWithLocationGroupNameLabel&&P.extra.buyer_location_group_id>0?"msg_promotion__prompt__order_total__location_group__":"msg_promotion__prompt__order_total__";if(C+=e,C+=h?"__cb":"",y.push(c(C,{deltaPhrase:E,minOrderTotal:(0,o.formatCurrencyWrapper)(p,e,P.minOrderTotal),channelNames:O,shopName:l,buyerLocationGroupName:P.extra.buyer_location_group_name||""})),!p.showAllUnmetTiersForPrompt)break}}}return y.length?y.join(n.LIST_SEPARATOR[t]):""},this.calculateShowFreeShippingIcon=function(e,t,r,n){return _.shouldShowFreeShippingIconBesideCartText(e)},this.shouldShowFreeShippingIconBesideCartText=function(t){if("VN"===e){for(var r=0;r<t.length;r++)if(t[r].discount_flag&n.LogisticPromotionRuleDiscountFlag.CAPPED)return!0;return!1}return!0},this.shouldShowFreeShippingIconBesidePrompt=function(t,r){if("VN"===e){for(var o=0;o<t.length;o++){var i=t[o];if(i.discount_flag&n.LogisticPromotionRuleDiscountFlag.CAPPED){if(!(i.discount_rule_flag&n.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_MIN_ORDER_TOTAL))return!0;if(r>=i.extra_data.min_order_total)return!0}}return!1}return!0},this}return{create:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return new(Function.prototype.bind.apply(e,[null].concat(r)))}}}t.default=c,e&&e.exports&&(c.default=c,e.exports=c)}).call(this,r(11)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONVERT_RATIO=1e5,t.MAX_PRECISION=20,t.COUNTRY_TO_CURRENCY={SG:"SGD",ID:"IDR",MY:"MYR",PH:"PHP",TW:"TWD",TH:"THB",VN:"VND",IR:"IRR",MM:"MMK",HK:"HKD"};var n=t.CURRENCY={SGD:{symbol:"$",precision:2,separator:",",decimalPoint:".",convertRate:1},IDR:{symbol:"Rp",precision:0,separator:".",decimalPoint:",",convertRate:1},MYR:{symbol:"RM",precision:2,separator:",",decimalPoint:".",convertRate:1},PHP:{symbol:"₱",precision:0,separator:",",decimalPoint:".",convertRate:1},TWD:{symbol:"$",precision:0,separator:",",decimalPoint:".",convertRate:1},THB:{symbol:"฿",precision:0,separator:",",decimalPoint:".",convertRate:1},VND:{symbol:"₫",precision:0,separator:".",decimalPoint:",",convertRate:1},IRR:{symbol:"تومان",precision:0,separator:",",decimalPoint:".",convertRate:.1},MMK:{symbol:"Ks",precision:0,separator:",",decimalPoint:".",convertRate:1},HKD:{symbol:"$",precision:2,separator:",",decimalPoint:".",convertRate:1}};t.CURRENCY_SYMBOL=function(){var e={};return Object.keys(n).forEach(function(t){e[t]=n[t].symbol}),e}(),t.NOTCHES=[{notch:1e9,unit:"b"},{notch:1e6,unit:"m"},{notch:1e3,unit:"k"}],t.LOCALIZED_NOTCH_UNITS={default:{K:"k",M:"m",B:"b"},id:{K:"rb",M:"juta"},ph:{K:"k",M:"mil"},th:{K:"พัน",M:"ล้าน"},vn:{K:"k",M:"tr"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);function o(e,t){return n.CURRENCY[t||n.COUNTRY_TO_CURRENCY[e]]}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=parseFloat(e);return isFinite(r)?(t&&(r/=n.CONVERT_RATIO),r):e}function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";if(e=i(e),!isFinite(e))return e;var o=e.toString(),a=o.indexOf(".");if(null===t||void 0===t?t=a>=0?o.length-a+1:0:o=e.toFixed(t),n){for(var u=0===t?o.length:o.indexOf("."),s=o.search(/^-\+/)+1,l=o.slice(0,s),c=[],p=u;p>s;p-=3)c.push(o.slice(Math.max(0,p-3),p));c.reverse();var _=l+c.join(n);return 0===t?_:_+r+o.substr(u+1)}return o.replace(/\./,r)}function u(e,t){var r=o(t);return a(e,void 0,r.decimalPoint,r.separator)}function s(e,t,r,u){var s=i(r,!0),l=s<0,c=o(e,u),p=s*c.convertRate;return t=t>=0&&t<=n.MAX_PRECISION?t:c.precision,(l?"-":"")+c.symbol+a(Math.abs(p),t,c.decimalPoint,c.separator)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.NOTCHES,a=i(e);if(!isFinite(a)||Math.abs(a)<r)return[parseFloat(a.toFixed(t)),""];t=(t=parseInt(t,10))>=0?t>n.MAX_PRECISION?n.MAX_PRECISION:t:1;for(var u=0;u<o.length;u++){var s=o[u],l=s.notch,c=s.unit,p=parseFloat((a/l).toFixed(t));if(Math.abs(p)>=1)return[p,c]}return[a,""]}function c(e,t,r,o,i){var a=n.LOCALIZED_NOTCH_UNITS.default,s=n.LOCALIZED_NOTCH_UNITS[e&&e.toLowerCase()||"default"]||a,c=function(t,r){return r=r&&r.toUpperCase(),[u(t,e&&e.toUpperCase()||"SG"),s[r]||a[r]||""]};if(void 0!==t){var p=l(t,r,o,i);return c.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(p))}return c}Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})}),t.getCurrencyConfig=o,t.parseNumber=i,t.formatNum=a,t.formatNumber=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:".";return a(i(e,!n),r,o,t)},t.localizeNumber=u,t.default=function(e,t,r){return s(e,void 0,t,r)},t.formatCurrencyWithPrecision=s,t.getCurrencySymbolByCountryCode=function(e){var t=o(e);return t&&t.symbol},t.getCurrencySymbolByCurrencyID=function(e){var t=o(void 0,e);return t&&t.symbol},t.compactNumber=l,t.localizeCompactNumber=c,t.compactCurrencyFromServer=function(e,t,r,n,a){var u=i(t,!0),s=u<0,l=o(e),p=u*l.convertRate;return(s?"-":"")+l.symbol+c(e,Math.abs(p),r,n,a).join("")}}])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateCartDiscountString=function(e,t,r,n,o,i,u,s,l){var c=new a.CartDisplay(e,t,r,n),p=c.getParams();return c.process(p,o,i,u,s,l)},t.generateChannelDiscountHint=function(e,t,r,o,i,a,u,s){var l=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},u,a),c=new n.ChannelDisplay(e,t,r,o),p=c.getParams();return c.process(p,i,l,s,u,0)},t.generateDiscountPrompt=function(e,t,r,n,o,a,u,s,l){var c=new i.CheckoutDisplay(e,t,r,n),p=c.getParams();return c.process(p,o,a,u,s,l)},t.generateProductGreenTruckDiscountString=function(e,t,r,n,i,a,u,s,l){var c=new o.ProductDisplay(e,t,r,n),p=c.getParams();return c.process(p,i,a,u,s,l)};var n=r(14),o=r(16),i=r(17),a=r(18);r(8)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelDisplay=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=(r(0),r(3),r(1)),i=r(4),u=r(2);r(7),r(6),t.ChannelDisplay=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.BaseDisplay),n(t,[{key:"getHintGenerator",value:function(){return this.processChannelHint}},{key:"processChannelHint",value:function(e){var t=e.preprocessedPromotions,r=this.sortDiscountRuleVars(t);if(r.length<=0)return[];for(var n=r[0],o=r[0],i=[],a=0;a<r.length;a++)n=r[a],0!==a?this.isStrictlyBetterRule(o,n)&&(i.push(n),o=n):i.push(n);return this.getRuleHints(i)}},{key:"sortDiscountRuleVars",value:function(e){return e.sort(function(e,t){if(e.minOrderTotal<t.minOrderTotal)return-1;if(e.minOrderTotal>t.minOrderTotal)return 1;var r=(0,u.isFlatRateFreeShippingDiscountRuleVar)(e,null),n=(0,u.isFlatRateFreeShippingDiscountRuleVar)(t,null);if(n-r!=0)return n-r;if((0,u.isCapDiscountRuleVar)(e,null)&&(0,u.isCapDiscountRuleVar)(t,null)){if(e.delta<t.delta)return 1;if(e.delta>t.delta)return-1}return e.priority-t.priority})}},{key:"isStrictlyBetterRule",value:function(e,t){var r=(0,u.isFlatRateFreeShippingDiscountRuleVar)(e,null),n=(0,u.isCapDiscountRuleVar)(e,null),o=(0,u.isCapDiscountRuleVar)(t,null);return!(r||n&&o&&e.delta>=t.delta)}},{key:"getRuleHints",value:function(e){var t=this;return e.map(function(e){return{rulesetData:t.getRulesetData(e),rulePhraseData:t.getRulePhraseData(e)}})}},{key:"getRulesetData",value:function(e,t){var r=(0,o.formatCurrencyWrapper)(this.config,this.countryCode,e.delta),n={delta:this.config.HIGHLIGHT_DELTA_AMOUNT_FOR_CHANNEL_DISPLAY?(0,o.highlight)(this.config,r):r},i=(0,u.isFlatRateFreeShippingDiscountRuleVar)(e)?"msg_promotion__ruleset__simple":"msg_promotion__ruleset__capped__simple";return{transifyKey:i=this.getCountrySpecificTransifyKey(i),transifyData:n}}},{key:"getRulePhraseData",value:function(e){var t=(0,o.formatCurrencyWrapper)(this.config,this.countryCode,e.minOrderTotal),r={minOrderTotal:this.config.HIGHLIGHT_MBS_FOR_CHANNEL_DISPLAY?(0,o.highlight)(this.config,t):t,useFreeShippingPhrase:!0};return[{discountRuleVar:e,transifyKey:this.getCountrySpecificTransifyKey("msg_promotion__rule__order_total__simple"),transifyData:r}]}}]),t}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatRuleToDiscountRuleVars=function(e,t,r){return t.map(function(t){var i=(0,o.getPromotionChannelIds)(t,r.shopEnabledChannelsData),a=(0,n.getDiscountRuleVars)(e,r.channels,t,r.shopEnabledChannelsData,i);return a.minOrderTotal=a.minOrderTotal||0,a})};var n=r(3),o=r(6)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProductDisplay=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(4),i=r(5),u=r(0);r(2),t.ProductDisplay=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.BaseDisplay),n(t,[{key:"getHintGenerator",value:function(){return this.processGreenTruckDiscountDisplay}},{key:"processGreenTruckDiscountDisplay",value:function(e){var t=e.preprocessedPromotions,r=(0,i.canApplyFSPromotion)({discountRuleVars:t,orderTotal:e.orderTotal});return[{rulesetData:this.getRulesetData(r),rulePhraseData:this.getRulePhraseData()}]}},{key:"getRulesetData",value:function(e){var t=e?"msg_promotion__ruleset__simple":"msg_promotion__ruleset__min_spend__icon__simple",r=e?{}:{icon:u.ICON_HELP_MARKER};return{transifyKey:this.getCountrySpecificTransifyKey(t),transifyData:r}}},{key:"getRulePhraseData",value:function(){return[{discountRuleVar:{},transifyKey:"msg_promotion__rule__simple",transifyData:{useFreeShippingPhrase:!0}}]}}]),t}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutDisplay=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1),i=r(4),u=r(2),s=r(5),l=r(6);t.CheckoutDisplay=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.BaseDisplay),n(t,[{key:"getPostProcessingStopConditions",value:function(){return function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getPostProcessingStopConditions",this).call(this).concat([s.canApplyHighestMBSDiscountRuleVars,s.canApplyFSPromotion])}},{key:"getHintGenerator",value:function(){return this.processCheckoutDiscountString}},{key:"processCheckoutDiscountString",value:function(e){var t=e.preprocessedPromotions,r=e.orderTotal,n=(0,l.groupDiscountVarsByMBS)(t),o=(0,l.sortArrayByValue)(Object.keys(n)).map(function(e){return parseInt(e)}).filter(function(e){return e>r});if(o.length<=0)return[];var i=o[0],a=this.sortDiscountRuleVarsInMBS(n[i])[0];return[{rulesetData:this.getRulesetData(a,r),rulePhraseData:this.getRulePhraseData(a)}]}},{key:"sortDiscountRuleVarsInMBS",value:function(e){return e.sort(function(e,t){return e.discountedFee<t.discountedFee?-1:e.discountedFee>t.discountedFee?1:e.priority<t.priority?-1:e.priority>t.priority?1:0})}},{key:"getRulesetData",value:function(e,t){var r={delta:(0,o.formatCurrencyWrapper)(this.config,this.countryCode,e.delta)},n=(0,u.isCapDiscountRuleVar)(e)?"msg_promotion__ruleset__capped__simple":"msg_promotion__ruleset__simple";return{transifyKey:n=this.getCountrySpecificTransifyKey(n),transifyData:r}}},{key:"getRulePhraseData",value:function(e){var t={minOrderTotal:(0,o.formatCurrencyWrapper)(this.config,this.countryCode,e.minOrderTotal),useFreeShippingPhrase:!0};return[{discountRuleVar:e,transifyKey:this.getCountrySpecificTransifyKey("msg_promotion__rule__order_total__simple"),transifyData:t}]}}]),t}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CartDisplay=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1),i=r(4),u=r(2),s=r(7),l=r(5);r(6),r(0),t.CartDisplay=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.BaseDisplay),n(t,[{key:"getHintGenerator",value:function(){return this.processCartDiscountString}},{key:"processCartDiscountString",value:function(e){var t=e.preprocessedPromotions,r=(0,l.canApplyFlatRateFSPromotion)({discountRuleVars:t,orderTotal:e.orderTotal})?this.getFlatRateZeroDiscountRuleVar(t):this.getCappedDiscountRuleVar(t);return r?[{rulesetData:this.getRulesetData(r),rulePhraseData:this.getRulePhraseData(r)}]:[]}},{key:"getFlatRateZeroDiscountRuleVar",value:function(e){var t=e.filter(u.isFlatRateFreeShippingDiscountRuleVar);return(t=t.sort(s.sortDiscountRuleVarsByMBSAndPriority)).length>0?t[0]:null}},{key:"getCappedDiscountRuleVar",value:function(e){var t=e.filter(u.isCapDiscountRuleVar);return(t=t.sort(this.sortCapDiscountRuleVarsByDeltaAndMBS)).length>0?t[0]:null}},{key:"sortCapDiscountRuleVarsByDeltaAndMBS",value:function(e,t){return e.delta>t.delta?-1:e.delta<t.delta?1:(0,s.sortDiscountRuleVarsByMBSAndPriority)(e,t)}},{key:"getRulesetData",value:function(e){var t={delta:(0,o.formatCurrencyWrapper)(this.config,this.countryCode,e.delta)},r=(0,u.isFlatRateFreeShippingDiscountRuleVar)(e)?"msg_promotion__ruleset__simple":"msg_promotion__ruleset__capped__simple";return{transifyKey:r=this.getCountrySpecificTransifyKey(r),transifyData:t}}},{key:"getRulePhraseData",value:function(e){var t={minOrderTotal:(0,o.formatCurrencyWrapper)(this.config,this.countryCode,e.minOrderTotal),useFreeShippingPhrase:!0};return[{discountRuleVar:e,transifyKey:this.getCountrySpecificTransifyKey("msg_promotion__rule__order_total__simple"),transifyData:t}]}}]),t}()}])},"object"==a(t)&&"object"==a(e)?e.exports=i():(n=[],void 0===(o="function"==typeof(r=i)?r.apply(t,n):r)||(e.exports=o))}).call(this,r(417)(e))}}]);
//# sourceMappingURL=https://shopee.vn/assets/modules~PageShoppingCart~ShippingFee.35fe4c571fd643f969c5.js.map