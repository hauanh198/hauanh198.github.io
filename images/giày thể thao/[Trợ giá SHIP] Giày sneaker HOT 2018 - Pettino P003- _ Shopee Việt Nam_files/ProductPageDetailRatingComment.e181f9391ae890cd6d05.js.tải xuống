(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{1663:function(e,t,n){"use strict";var a=n(36);t.a=Object(a.a)({Icon:n(1684),iconClassNames:["icon-arrow-left"]})},1664:function(e,t,n){"use strict";var a=n(2),r=n(47),o=n.n(r),i=n(1665),s=n(1657);n(1174);function l(e){var t=e.direction,n=e.showArrowOnHover,r=e.isShown,l=e.handleClick,c=e.showArrowHint,u=e.isVisible,d=e.padding,h=e.IconArrow,p=n&&c&&!r;return d=d||"0px",a.createElement("div",{className:o()("carousel-arrow carousel-arrow--"+(t<0?"prev":"next"),p&&"carousel-arrow--hint",!u&&"carousel-arrow--hidden"),role:"button",tabIndex:0,style:{opacity:!n||r||p?"1":"0",visibility:u?"visible":"hidden",transform:"translateX(calc("+(t<0?"-50% + "+d:"50% - "+d)+"))"},onClick:l},h?a.createElement(h,null):t<0?a.createElement(i.a,null):a.createElement(s.a,null))}n(1170);var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={position:0,isSliding:!1,isShowArrows:!1},n.hideArrows=n.hideArrows.bind(n),n.showArrows=n.showArrows.bind(n),n.finishSliding=n.finishSliding.bind(n),n.handleNextArrowClick=n.handleNextArrowClick.bind(n),n.handlePrevArrowClick=n.handlePrevArrowClick.bind(n),n._carousel=null,n._carouselItems=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),c(t,[{key:"componentWillUnmount",value:function(){this._carousel=null,this._carouselItems=[]}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.numItemsPerRow,a=t.focusIndex,r=this.props.items?this.props.items.length:0;if("number"==typeof a){var o=Math.floor(a/n)*n,i=Math.min(o,Math.max(r-Math.floor(n),0));this.setState({position:i},function(){var t=e._carousel;t&&(t.style.transform=e.getCurrentCarouselTransform(i))})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.items,r=t.padding,i=t.numItemsPerRow,s=t.showArrowOnHover,c=t.showArrowHint,u=t.isFluid,d=t.distributeCardWidthWhenFewerItems,h=t.itemPadding,p=t.className,m=t.IconArrowLeft,f=t.IconArrowRight,b=this.state,g=b.isShowArrows,v=b.position,_=n.length,y=d&&_<i?100/_:100/i,E=_>i?y*_:100,w=this._carouselItems&&this._carouselItems[this.state.position]?this._carouselItems[this.state.position].getBoundingClientRect().width+"px":null;return a.createElement("div",{className:o()("image-carousel",p),onMouseEnter:this.showArrows,onMouseLeave:this.hideArrows,style:u?{width:w,transition:this.props.transitionTime+"ms"}:{}},a.createElement("div",{className:"image-carousel__item-list-wrapper"},a.createElement("ul",{className:"image-carousel__item-list",style:{width:u?null:E+"%",transform:this.getCurrentCarouselTransform(v)},ref:function(t){return e._carousel=t}},n.map(function(t,n){return a.createElement("li",{key:n,className:o()("image-carousel__item",u&&"image-carousel__item--fluid"),style:{padding:"0 "+r,width:u?null:y+"%"},ref:function(t){e._carouselItems[n]=t}},t)}))),a.createElement(l,{direction:-1,showArrowOnHover:s,isVisible:_>i&&v>0,isShown:g,handleClick:this.handlePrevArrowClick,showArrowHint:c,padding:h,IconArrow:m}),a.createElement(l,{direction:1,showArrowOnHover:s,isVisible:_>i&&v+i<_,isShown:g,handleClick:this.handleNextArrowClick,showArrowHint:c,padding:h,IconArrow:f}))}},{key:"getCurrentCarouselTransform",value:function(e){var t=this._carousel,n=this._carouselItems;if(!t)return"";var a=0;return this.props.isFluid&&n?"translate("+-(a=n.map(function(t,n){return t&&n<e?t.getBoundingClientRect().width:0}).reduce(function(e,t){return e+t},0))+"px, 0px)":(t.firstElementChild&&(a=t.firstElementChild.getBoundingClientRect().width),"translate("+-e*a+"px, 0px)")}},{key:"handlePrevArrowClick",value:function(){var e=this.state.position,t=0;this.props.keepPreviousItemOnSlide&&(t=1);var n=this.props.slidesByOne?Math.max(e-1,0):Math.max(e-Math.ceil(this.props.numItemsPerRow)+t,0);this.slideTo(n)}},{key:"handleNextArrowClick",value:function(){var e=this.props,t=e.items,n=e.numItemsPerRow,a=e.slidesByOne,r=t.length-Math.floor(n),o=this.state.position,i=0;this.props.keepPreviousItemOnSlide&&(i=1);var s=a?Math.min(o+1,r):Math.min(o+Math.ceil(n)-i,r);this.slideTo(s)}},{key:"slideTo",value:function(e){var t=this;if(!this.state.isSliding||this.props.isOverrideSliding){this._finishSlidingTimeout&&clearTimeout(this._finishSlidingTimeout);var n=this.props.transitionTime;this.setState({isSliding:!0});var a=this._carousel;a&&(a.style.transition=n+"ms",a.style.transform=this.getCurrentCarouselTransform(e)),"function"==typeof this.props.onSlide&&this.props.onSlide(e),this.props.isOverrideSliding&&this.setState({position:e}),this._finishSlidingTimeout=setTimeout(function(){t.finishSliding(e)},n)}}},{key:"finishSliding",value:function(e){this.setState({isSliding:!1,position:e}),this._finishSlidingTimeout&&clearTimeout(this._finishSlidingTimeout)}},{key:"showArrows",value:function(){this.setState({isShowArrows:!0})}},{key:"hideArrows",value:function(){this.setState({isShowArrows:!1})}}]),t}();u.defaultProps={transitionTime:500,showArrowOnHover:!1,padding:"1rem",keepPreviousItemOnSlide:!0,showArrowHint:!1,isFluid:!1,isOverrideSliding:!1,slidesByOne:!1};t.a=u},1669:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(2),r=n.n(a),o=n(47),i=n.n(o),s=n(78),l=n(1663),c=n(292);n(1175);function u(e){var t=e.selectedPage,n=e.totalPageCount,a=e.onPageSelected,o=e.buttonModifier,u=e.useV2Design,d=e.className,h=[];!t||t<2?[0,1,2,3,4].forEach(function(e){e<n&&h.push(e)}):2===t?[0,1,2,3,4,5].forEach(function(e){e<n&&h.push(e)}):([0,1].forEach(function(e){e<n&&h.push(e)}),t&&t>=n-2?Array.from(new Array(5),function(e,t){return n-5+t}).forEach(function(e){e>1&&h.push(e)}):Array.from(new Array(5),function(e,n){return t?t-2+n:0}).forEach(function(e){e>1&&e<n&&h.push(e)}));var p=[],m=function(e){return r.a.createElement(s.a,{key:e,modifiers:["non-click"]},"...")},f=0;return h.forEach(function(e,i,l){f+1<e&&p.push(m("ellipsis"+i)),f=e,p.push(e===t?r.a.createElement(s.d,{key:e,modifiers:[o||"primary"]},e+1):r.a.createElement(s.a,{key:e,onClick:function(){return a(e)}},e+1)),i===l.length-1&&e<n-1&&p.push(m("ellipsis"+i))}),r.a.createElement("div",{className:i()("shopee-page-controller",{"shopee-page-controller--v2":u},d||"")},r.a.createElement(s.f,{Icon:l.a,modifiers:["left"],onClick:0===t?null:function(){a(t-1)}}),p,r.a.createElement(s.f,{Icon:c.a,modifiers:["right"],onClick:t&&t<n-1?function(){a(t+1)}:0===t&&n>1?function(){a(1)}:null}))}u.defaultProps={totalPageCount:0,selectedPage:0,useV2Design:!1}},1788:function(e,t,n){"use strict";var a=n(2),r=n(47),o=n.n(r),i=n(36),s=Object(i.a)({Icon:n(1818)}),l=n(13),c=(n(1194),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}());var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=function(e){var t=e.target.value;n.setState({value:t},function(){n.props.onChange&&n.props.onChange(t)})},n.onFocus=function(){n.setState({focus:!0,dirty:!0}),n.props.onFocus&&n.props.onFocus(n.state.value,n.state.error)},n.onBlur=function(){n.setState({focus:!1}),n.validate().then(function(){n.props.onBlur&&n.props.onBlur(n.state.value,n.state.error)})},n.onKeyPress=function(e){"Enter"===e.key&&(n.onBlur(),n.props.onEnter&&n.props.onEnter())},n.state={value:e.defaultValue,error:null,focus:!1,dirty:!1},n.clearInput=n.clearInput.bind(n),n.onChange=n.onChange.bind(n),n.onFocus=n.onFocus.bind(n),n.onBlur=n.onBlur.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),c(t,[{key:"componentDidUpdate",value:function(e){e.defaultValue!==this.props.defaultValue&&this.setState({value:this.props.defaultValue})}},{key:"getValue",value:function(){return this.state.value}},{key:"clearInput",value:function(){var e=this;this.setState({value:""},function(){e.props.onChange&&e.props.onChange("")})}},{key:"validate",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.validate(this.state.value);case 2:return t=e.sent,this.setState({dirty:!0,error:t}),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(r,o){try{var i=t[r](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}("next")})});return function(){return t.apply(this,arguments)}}()},{key:"shouldShowErrorMessage",value:function(){var e=this.state,t=e.dirty,n=e.focus,a=e.error;return this.props.shouldShowErrorMessage||t&&!n&&a}},{key:"renderErrorMessage",value:function(){var e=this.shouldShowErrorMessage();return this.props.showErrorMessage&&a.createElement("div",{className:"input-with-validator__error-message"},e&&this.props.errorMessageIcon?this.props.errorMessageIcon:null,e?this.props.errorMessage?this.props.errorMessage:Object(l.b)(this.state.error):null)}},{key:"renderSuccessMessage",value:function(){return this.props.successMessage?a.createElement("div",{className:"input-with-validator__success-message"},this.props.successMessage):null}},{key:"render",value:function(){return a.createElement("div",{className:o()("input-with-validator-wrapper",this.props.className)},a.createElement("div",{className:o()("input-with-validator",this.state.focus&&"input-with-validator--focus",this.shouldShowErrorMessage()&&"input-with-validator--error")},a.createElement("input",{type:this.props.type,placeholder:this.props.placeholder,value:this.state.value,maxLength:this.props.maxLength||null,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyPress:this.onKeyPress}),this.props.shouldShowClearIcon&&this.state.value.length>0&&a.createElement(s,{className:"input-with-validator__cancel-button",onClick:this.clearInput})),this.renderErrorMessage(),this.renderSuccessMessage())}}]),t}();u.defaultProps={type:"text",placeholder:"",defaultValue:"",validate:function(){return null},showErrorMessage:!1,shouldShowClearIcon:!1};t.a=u},1818:function(e,t,n){var a=n(2);function r(e){return a.createElement("svg",e,a.createElement("g",{fill:"none",fillRule:"evenodd"},[a.createElement("circle",{cx:"8",cy:"8",r:"8",fill:"#000",fillOpacity:".26",key:0}),a.createElement("path",{fill:"#FFF",stroke:"#FFF",d:"M8.28367221 7.99982154L10.7984046 10.51435c.0783177.0785216.0783177.2055839 0 .2839016-.0785217.0783177-.205584.0783177-.2839017 0L7.99997451 8.2837232l-2.51473237 2.5145284c-.07811375.0783177-.20538001.0783177-.28349376 0-.07852165-.0783177-.07852165-.20538 0-.2839016L7.7162768 7.99982154 5.20174838 5.48549708c-.07852165-.0783177-.07852165-.20558396 0-.28390166.07811375-.0783177.20538001-.0783177.28349376 0l2.51473237 2.51432446 2.51452839-2.51432446c.0783177-.0783177.20538-.0783177.2839017 0 .0783177.0783177.0783177.20558396 0 .28390166L8.28367221 7.99982154z",key:1})]))}r.displayName="IcCancel",r.defaultProps={width:"16",height:"16"},e.exports=r,r.default=r},1861:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(36),i=Object(o.a)({Icon:n(1939),iconClassNames:["icon-loading-image"]}),s=n(38);n(1270);function l(e){var t=e.url,n=e.needThumb;return r.a.createElement("div",{className:"shopee-image__wrapper"},r.a.createElement("div",{className:"shopee-image__place-holder"},r.a.createElement(i,null)),r.a.createElement("div",{className:"shopee-image__content",style:t&&t.length>0?{backgroundImage:'url("'+Object(s.c)(t,n)+'")'}:{}},r.a.createElement("div",{className:"shopee-image__content--blur"}," ")))}n.d(t,"a",function(){return l})},1946:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(2),r=n.n(a),o=n(13);n(1273);function i(e){var t=e.response,n=e.titleText;return r.a.createElement("div",{className:"product-rating-response"},r.a.createElement("div",{className:"product-rating-response__title"},n||Object(o.b)("label_seller_response")),r.a.createElement("div",{className:"product-rating-response__content"},t))}},1947:function(e,t,n){"use strict";var a=n(47),r=n.n(a),o=n(2),i=n(1861),s=n(1664),l=n(38),c=(n(1274),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}());var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={zoomedIndex:0,carouselTransitionTime:0,expanded:!1},n._carousel=null,n.onCarouselSlide=n.onCarouselSlide.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),c(t,[{key:"onCarouselSlide",value:function(e){e>=0&&e<this.props.urlList.length&&this.setState({zoomedIndex:e})}},{key:"handleImageClick",value:function(e){var t=this,n=this.state,a=n.zoomedIndex;n.expanded&&a===e?this.setState({expanded:!1,zoomedIndex:0,carouselTransitionTime:0}):this.setState({expanded:!0,zoomedIndex:e,carouselTransitionTime:500},function(){t._carousel&&t._carousel.slideTo(e)})}},{key:"render",value:function(){var e=this,t=this.props.urlList;if(!t||!t.length)return null;var n=this.state,a=n.zoomedIndex,c=n.expanded,u=t.map(function(e,t){return o.createElement("img",{key:t,className:"image-list-inline-zoom__zoomed-image-item",src:Object(l.c)(e)})});return o.createElement("div",{className:"image-list-inline-zoom"},o.createElement("div",{className:"image-list-inline-zoom__container"},t.map(function(t,n){return o.createElement("div",{key:n,className:r()("image-list-inline-zoom__image-wrapper",c&&a===n?"image-list-inline-zoom__image-wrapper--active":"image-list-inline-zoom__image-wrapper--inactive"),onClick:e.handleImageClick.bind(e,n)},o.createElement(i.a,{url:t,needThumb:!0}))})),o.createElement("div",{className:r()("image-list-inline-zoom__zoomed-image",c&&"image-list-inline-zoom__zoomed-image--active")},o.createElement(s.a,{items:u,showArrowOnHover:!0,numItemsPerRow:1,showArrowHint:!0,ref:function(t){return e._carousel=t},onSlide:this.onCarouselSlide,keepPreviousItemOnSlide:!1,transitionTime:this.state.carouselTransitionTime,isFluid:!0,isOverrideSliding:!0})))}}]),t}();t.a=u},1964:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(38),i=n(36),s=Object(i.a)({Icon:n(1928),iconClassNames:["icon-zoom","icon-zoom-clear-cache"]}),l=n(1709),c=n(1696);n(1234);function u(e){var t=e.content,n=e.showContent,a=e.showPosition,i=void 0===a?"left":a,u=e.url,d=function(){u&&(u.startsWith("data:image")?window.open(u):window.open(Object(o.c)(u)))};return r.a.createElement(c.a,{drawerButton:r.a.createElement("div",{className:"shopee-drawer-image-show__image",onClick:d},t),alignment:i},r.a.createElement(l.a,{content:r.a.createElement("div",{className:"shopee-drawer-image-show__content-wrapper",onClick:d},n,u&&r.a.createElement("div",{className:"shopee-drawer-image-show__find-button"},r.a.createElement(s,null))),arrowPosition:i}))}n.d(t,"a",function(){return u})},1977:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(32),i=n.n(o),s=n(38),l=(n(1233),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}());var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={tabIndex:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),l(t,[{key:"handleTabClicked",value:function(e){this.state.tabIndex!==e&&(this.setState({tabIndex:e}),this.props.onTabSelected&&this.props.onTabSelected(e))}},{key:"render",value:function(){var e=this,t=this.props.tabs,n=this.props.tabIndex?this.props.tabIndex:this.state.tabIndex;return r.a.createElement("div",{className:"shopee-tab-container card"},r.a.createElement("ul",{className:"shopee-tab-container__header"},t.map(function(t,a){return r.a.createElement("li",{key:a,onClick:null===e.props.tabIndex?function(){e.handleTabClicked(a)}:null,className:Object(s.b)("shopee-tab-container__header-item",a===n?["active"]:[])},t.header)})),r.a.createElement("div",{className:"shopee-tab-container__content"},t&&t.length>n?t[n].content:null))}}]),t}();i.a.shape({header:i.a.element,content:i.a.element});t.a=c},1978:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(32),i=n.n(o),s=n(293),l=n(38),c=(n(1236),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}());function u(e,t,n){return{type:0,infoid:t,offset:e,length:n}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleKeyDown=n.handleKeyDown.bind(n),n.handleKeyPress=n.handleKeyPress.bind(n),n.handleBlur=n.handleBlur.bind(n),n.handleFocus=n.handleFocus.bind(n),n.handleKeyUpWhenEditingInTransientNode=n.handleKeyUpWhenEditingInTransientNode.bind(n),n.handlePaste=n.handlePaste.bind(n),n.handleSelectableUserClick=n.handleSelectableUserClick.bind(n),n.closeUserListNodeWhenClickOutside=n.closeUserListNodeWhenClickOutside.bind(n),n.placeHolderNode=void 0!==e.placeholder?n.createPlaceholderNode(e.placeholder):null,n.editableNode=null,n.commentBox=null,n.resetContent(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),c(t,[{key:"componentDidMount",value:function(){this.placeHolderNode&&this.editableNode.appendChild(this.placeHolderNode)}},{key:"resetContent",value:function(){this.editableNode&&(this.editableNode.innerHTML=""),this.userNameToId={},this.selectedUserIndex=-1,this.transientNode=null,this.lastTransientContent=null,this.userListNode=null}},{key:"handleBlur",value:function(){var e=this;0===this.editableNode.textContent.trim().length&&(Array.prototype.forEach.call(this.editableNode.childNodes,function(t){e.editableNode.removeChild(t)}),this.placeHolderNode&&this.editableNode.appendChild(this.placeHolderNode))}},{key:"handleFocus",value:function(){this.editableNode.contains(this.placeHolderNode)&&(this.editableNode.removeChild(this.placeHolderNode),Object(s.j)(this.editableNode,0))}},{key:"handleKeyDown",value:function(e){this.editableNode.textContent.length>=t.MAX_LENGTH&&8!==e.keyCode&&(e.preventDefault(),e.stopPropagation());var n=void 0,a=void 0;switch(e.keyCode){case 8:if((n=Object(s.f)())&&this.isCaretInAtomicNode(n)){e.stopPropagation(),e.preventDefault();var r=n.startContainer,o=r.nodeType===s.b.ELEMENT_NODE?r:r.parentNode;this.editableNode.removeChild(o)}break;case 38:this.userListNode&&(e.stopPropagation(),e.preventDefault(),this.userListNode.childNodes[this.selectedUserIndex].setAttribute("class","shopee-comment-box__selectable-user"),this.selectedUserIndex=(this.selectedUserIndex+this.selectableUsers.length-1)%this.selectableUsers.length,(a=this.userListNode.childNodes[this.selectedUserIndex]).setAttribute("class","shopee-comment-box__selectable-user shopee-comment-box__selectable-user--active"),a.offsetTop<this.userListNode.scrollTop?this.userListNode.scrollTop=a.offsetTop:a.offsetTop>this.userListNode.scrollTop+this.userListNode.clientHeight&&(this.userListNode.scrollTop=a.offsetTop+a.offsetHeight-this.userListNode.clientHeight));break;case 40:this.userListNode&&(e.stopPropagation(),e.preventDefault(),this.userListNode.childNodes[this.selectedUserIndex].setAttribute("class","shopee-comment-box__selectable-user"),this.selectedUserIndex=(this.selectedUserIndex+this.selectableUsers.length+1)%this.selectableUsers.length,(a=this.userListNode.childNodes[this.selectedUserIndex]).setAttribute("class","shopee-comment-box__selectable-user shopee-comment-box__selectable-user--active"),a.offsetTop+a.offsetHeight>this.userListNode.clientHeight?this.userListNode.scrollTop=a.offsetTop+a.offsetHeight-this.userListNode.clientHeight:a.offsetTop<this.userListNode.scrollTop&&(this.userListNode.scrollTop=a.offsetTop));break;case 13:if(this.userListNode){e.stopPropagation(),e.preventDefault(),n=Object(s.f)();var i=this.selectableUsers[this.selectedUserIndex];this.userNameToId[i.username]=i.userid,this.transientNode.innerText="@"+i.username,this.transientNode.setAttribute("atomic",""),this.transientNode.setAttribute("class","shopee-comment-box__at-user"),Object(s.j)(this.transientNode.nextSibling,1),this.closeSelectableUserList(),this.transientNode=null,this.lastTransientContent=null}}}},{key:"handleKeyPress",value:function(e){var t=Object(s.f)();switch(this.isCaretInAtomicNode(t)&&this.moveCaretToNextEditableSpan(t),e.key){case"@":e.preventDefault(),e.stopPropagation(),this.insertTransientNodeAndMoveCaret(t)}}},{key:"handleKeyUpWhenEditingInTransientNode",value:function(){var e=Object(s.f)();!this.editableNode.contains(this.transientNode)||e&&!this.transientNode.contains(e.startContainer)?(this.closeSelectableUserList(),this.lastTransientContent=null,this.transientNode=null):this.transientNode.textContent!==this.lastTransientContent&&(this.lastTransientContent=this.transientNode.textContent,this.showUserListNode())}},{key:"handlePaste",value:function(e){this.editableNode.textContent.length+e.clipboardData.getData("text").length>t.MAX_LENGTH&&(e.preventDefault(),e.stopPropagation())}},{key:"handleSelectableUserClick",value:function(e){e.stopPropagation();var t=e.target,n=t.textContent;this.userNameToId[n]=parseInt(t.getAttribute("data-userid"),10),this.transientNode.innerText="@"+n,this.transientNode.setAttribute("atomic",""),this.transientNode.setAttribute("class","shopee-comment-box__at-user"),Object(s.j)(this.transientNode.nextSibling,1),this.closeSelectableUserList(),this.transientNode=null,this.lastTransientContent=null}},{key:"createPlaceholderNode",value:function(e){var t=document.createElement("span");return t.setAttribute("class","shopee-comment-box__placeholder"),t.innerText=e,t}},{key:"closeSelectableUserList",value:function(){this.selectedUserIndex=-1,this.userListNode&&(this.commentBox.removeChild(this.userListNode),this.userListNode=null),this.editableNode.removeEventListener("keyup",this.handleKeyUpWhenEditingInTransientNode)}},{key:"replyComment",value:function(e){var t=e.get("username");this.userNameToId[t]=e.get("userid"),this.editableNode.focus(),this.appendAtUserNodeAndMoveToNextEditableSpan(t)}},{key:"getCommentContent",value:function(){var e=this.editableNode.textContent,t=0,n=this.editableNode.querySelectorAll("span[atomic]"),a=[],r=void 0,o=void 0,i=void 0,s=void 0;for(r=0;r<n.length;r++)o=n[r].textContent,i=e.indexOf(o,t),s=o.length,a.push(u(i,this.userNameToId[o.slice(1)],s)),t=i+s;return{content:this.editableNode.textContent,mentioned:a}}},{key:"isCaretInAtomicNode",value:function(e){var t=e.startContainer;return t.nodeType===s.b.TEXT_NODE?t.parentNode.hasAttribute("atomic"):t.nodeType===s.b.ELEMENT_NODE?t.hasAttribute("atomic"):void 0}},{key:"moveCaretToNextEditableSpan",value:function(e){var t=e.startContainer,n=t.nodeType===s.b.TEXT_NODE?t.parentNode:t;if(!n.nextSibling){var a=document.createElement("span");a.innerText=" ",t.nodeType===s.b.ELEMENT_NODE?this.editableNode.insertBefore(a,n):this.editableNode.insertBefore(a,n.nextSibling)}if(n.nextSibling.nodeType===s.b.TEXT_NODE)Object(s.j)(n.nextSibling,1);else{var r=n.nextSibling.childNodes[0];Object(s.j)(r,1)}}},{key:"appendAtUserNodeAndMoveToNextEditableSpan",value:function(e){var t=this;Array.prototype.forEach.call(this.editableNode.getElementsByTagName("br"),function(e){t.editableNode.removeChild(e)});var n=document.createElement("span");n.innerText="@"+e,n.setAttribute("atomic",""),n.setAttribute("class","shopee-comment-box__at-user");var a=document.createElement("span");a.innerText=" ",this.editableNode.appendChild(n),this.editableNode.appendChild(a),Object(s.j)(a,1)}},{key:"insertTransientNodeAndMoveCaret",value:function(e){var t=this,n=e.startContainer,a=document.createElement("span");if(this.transientNode=document.createElement("span"),this.transientNode.innerText="@",n!==this.editableNode){var r=n.parentNode===this.editableNode?n:n.parentNode,o=e.startOffset,i=n.textContent.slice(0,o),l=" "+n.textContent.slice(o);if(i.length>0){var c=document.createElement("span");c.innerText=i,this.editableNode.insertBefore(c,r)}a.innerText=l,this.editableNode.insertBefore(a,r.nextSibling),this.editableNode.insertBefore(this.transientNode,r),this.editableNode.removeChild(r)}else a.innerText=" ",Array.prototype.forEach.call(this.editableNode.getElementsByTagName("br"),function(e){t.editableNode.removeChild(e)}),this.editableNode.appendChild(this.transientNode),this.editableNode.appendChild(a);this.lastTransientContent="@",this.editableNode.addEventListener("keyup",this.handleKeyUpWhenEditingInTransientNode),Object(s.j)(this.transientNode,1),this.showUserListNode()}},{key:"generateSelectableListNode",value:function(){var e=document.createElement("div");return e.setAttribute("class","shopee-comment-box__selectable-users"),this.selectableUsers.forEach(function(t){var n=document.createElement("div"),a=document.createElement("img");a.setAttribute("src",Object(l.c)(t.avatar,!0)),a.setAttribute("class","shopee-comment-box__user-avatar"),n.appendChild(a),n.appendChild(document.createTextNode(t.username)),n.setAttribute("data-userid",t.userid),n.setAttribute("class","shopee-comment-box__selectable-user"),e.appendChild(n)}),e}},{key:"filterSelectableUsers",value:function(){var e=this,t=this.transientNode.textContent.slice(1);0===t.length?this.selectableUsers=this.props.mentionableUsers:(this.selectableUsers=[],this.props.mentionableUsers.forEach(function(n){n.username.startsWith(t)&&e.selectableUsers.push(n)}))}},{key:"closeUserListNodeWhenClickOutside",value:function(e){Object(s.i)(e.target,this.commentBox)||(this.closeSelectableUserList(),document.body.removeEventListener("click",this.closeUserListNodeWhenClickOutside,!0))}},{key:"showUserListNode",value:function(){this.userListNode&&this.commentBox.removeChild(this.userListNode);var e=this.commentBox.getBoundingClientRect(),t=e.height,n=this.transientNode.offsetLeft;this.filterSelectableUsers(),this.selectableUsers.length>0?(this.userListNode=this.generateSelectableListNode(),this.userListNode.style.bottom=t+"px",n+200<e.width?this.userListNode.style.left=n+"px":this.userListNode.style.right="0px",this.userListNode.style.position="absolute",this.selectedUserIndex=0,this.userListNode.childNodes[0].setAttribute("class","shopee-comment-box__selectable-user shopee-comment-box__selectable-user--active"),this.commentBox.appendChild(this.userListNode),this.userListNode.addEventListener("click",this.handleSelectableUserClick),document.body.addEventListener("click",this.closeUserListNodeWhenClickOutside,!0)):this.userListNode=null}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{ref:function(t){e.commentBox=t},className:"shopee-comment-box"},r.a.createElement("div",{ref:function(t){e.editableNode=t},className:"shopee-comment-box__edit-area",onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,onBlur:this.handleBlur,onFocus:this.handleFocus,onPaste:this.handlePaste,contentEditable:!0}))}}]),t}();d.MAX_LENGTH=2500;i.a.shape({username:i.a.string,userid:i.a.number});t.a=d},2040:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(178),i=n.n(o),s=n(1964),l=n(293),c=n(1861),u=(n(1271),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}());var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),u(t,[{key:"componentDidMount",value:function(){if(this.props.urlList.length){var e=i.a.findDOMNode(this).clientWidth,t=document.getElementsByClassName("shopee-image-list__image-wrapper")[0],n=t.offsetWidth+Object(l.g)(t,"margin-right")+Object(l.g)(t,"margin-left");n&&this.setState({maxImageInSameRow:Math.floor(e/n)})}}},{key:"render",value:function(){var e=this.props.urlList.length,t=this.state.maxImageInSameRow||3*e,n=Math.floor(t/3),a=Math.floor((t-n)/2);return n+=a,r.a.createElement("div",{className:"shopee-image-list__container"},this.props.urlList.map(function(e,o){var i=o%t;return r.a.createElement(s.a,{key:o,content:r.a.createElement("div",{className:"shopee-image-list__image-wrapper"},r.a.createElement(c.a,{url:e,needThumb:!0})),showContent:r.a.createElement("div",{className:"shopee-image-list__show-image-wrapper"},r.a.createElement(c.a,{url:e})),url:e,showPosition:i<a?"left":i<n?"center":"right"})}))}}]),t}();t.a=d},2041:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=(n(32),n(47)),i=n.n(o),s=n(13),l=n(1788),c=n(78),u=n(97),d=(n(1272),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}());var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={reply:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),d(t,[{key:"onChange",value:function(e){this.setState({reply:e})}},{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.memo,a=e.onClickSave,o=e.onClickCancel,d=e.error;return r.a.createElement("div",{className:"product-rating-reply"},r.a.createElement("div",{className:i()("product-rating-reply__input",{"product-rating-reply__input--error":d})},r.a.createElement(l.a,{maxLength:u.d,placeholder:t,onChange:this.onChange.bind(this)})),d&&r.a.createElement("div",{className:"product-rating-reply__error"},Object(s.b)(d)),r.a.createElement("div",{className:"product-rating-reply__actions"},r.a.createElement(c.d,{modifiers:["primary"],classnames:["product-rating-reply__button","product-rating-reply__button--save"],onClick:a.bind(this,this.state.reply)},Object(s.b)("label_save")),r.a.createElement(c.b,{classnames:["product-rating-reply__button","product-rating-reply__button--cancel"],onClick:o},Object(s.b)("label_cancel")),r.a.createElement("div",{className:"product-rating-reply__fatty"}),r.a.createElement("div",{className:"product-rating-reply__memo"},n)))}}]),t}();h.defaultProps={memo:Object(s.b)("label_seller_can_only_reply_once"),placeholder:Object(s.b)("label_seller_response")},t.a=h},2497:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(1977),i=n(13),s=n(97),l=n(32),c=n.n(l),u=(n(291),n(300)),d=n(1669),h=n(293),p=n(1978),m=n(16),f=n(1652),b=n.n(f),g=n(301),v=n(38),_=n(78),y=n(2040),E=n(37),w=n(36),N=Object(w.a)({Icon:n(2114),iconClassNames:["icon-delete"]}),C=n(298),O=Object(w.a)({Icon:n(2122),iconClassNames:["icon-reply"]}),k=n(1672),x=new b.a;x.locale.set("VN");var I=function(e){var t=e.content,n=[],a=0;return e.mentioned.forEach(function(e){var o=e.get("offset"),i=e.get("length");a<o&&n.push(r.a.createElement("span",{key:n.length},t.slice(a,o))),n.push(r.a.createElement("span",{key:n.length,className:"product-comment-item__at-user"},t.slice(o,o+i))),a=o+i}),n.push(r.a.createElement("span",{key:n.length},t.slice(a))),r.a.createElement("div",{className:"product-comment-item__content"},n)},j=function(e){var t=e.onDeleteClick,n=e.comment;return r.a.createElement(_.a,{onClick:function(){t?t(n.get("cmtid")):alert("not supported yet")}},r.a.createElement(N,null),Object(i.b)("label_delete"))},S=function(e){var t=e.onReplyClick,n=e.comment;return r.a.createElement(_.a,{onClick:function(){t?t(n):alert("not supported yet")}},r.a.createElement(O,null),Object(i.b)("label_reply"))},P=function(e){var t=e.comment,n=e.isRating,a=e.loggedInUser,o=e.onReplyClick,s=e.onDeleteClick,l=t.get("images"),c=x.create(t.get("ctime"),"s").format("YYYY-MM-DD hh:mm"),u=a&&a.get("username")===t.get("username"),d=[],h=null;if(n){var p=t.get("modelid"),f=t.getIn(["product_items",0,"models"]).find(function(e){return e.get("modelid")===p});h=f?f.get("name"):""}else u?d.push(r.a.createElement(j,{key:"delete-btn",onDeleteClick:s,comment:t})):d.push(r.a.createElement(S,{key:"reply-btn",onReplyClick:o,comment:t}));var b=-1===t.get("authorid");return r.a.createElement("div",{className:"product-comment-item"},r.a.createElement("div",{className:"product-comment-item__section1"},b?r.a.createElement(g.a,{imgSrc:Object(v.c)(t.get("author_pic"),!0)}):r.a.createElement(m.a,{to:Object(E.fb)(t.get("authorid"),t.get("username"))},r.a.createElement(g.a,{imgSrc:Object(v.c)(t.get("author_pic"),!0)}))),r.a.createElement("div",{className:"product-comment-item__section2"},b?r.a.createElement("div",{className:"product-comment-item__author-name"},null===t.get("username")?Object(i.b)("text_shopee_user"):t.get("username")):r.a.createElement(m.a,{to:Object(E.fb)(t.get("authorid"),t.get("username")),className:"product-comment-item__author-name"},null===t.get("username")?Object(i.b)("text_shopee_user"):t.get("username")),n?r.a.createElement("div",{className:"product-comment-item__rating"},new Array(5).map(function(e,n){return n<t.get("rating_star")?r.a.createElement(k.a,{classNames:["icon-rating-solid--active"]}):r.a.createElement(C.a,null)})):null,t.has("comment")&&0!==t.get("comment").length?r.a.createElement(I,{content:t.get("comment"),mentioned:t.get("mentioned")}):null,l&&0!==l.size?r.a.createElement("div",{className:"product-comment-item__image-list-wrapper"},r.a.createElement(y.a,{urlList:l.toJS()})):null,r.a.createElement("div",{className:"product-comment-item__comment-time"},h?c+" | "+h:c)),r.a.createElement("div",{className:"product-comment-item__section3"},r.a.createElement("div",{className:"product-comment-item__buttons"},d)))};P.contextTypes={itemId:c.a.number,shopId:c.a.number},P.defaultProps={isRating:!1};var T=P,L=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var A=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedPage:0},n.uploadImages={},n.handleCommentSuccess=n.handleCommentSuccess.bind(n),n.handleSubmitComment=n.handleSubmitComment.bind(n),n.handleDeleteClick=n.handleDeleteClick.bind(n),n.handlePageSelected=n.handlePageSelected.bind(n),n.handleReplyClick=n.handleReplyClick.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),L(t,[{key:"handlePageSelected",value:function(e){var t=e*s.b,n=Math.floor(t/s.a),a=this.props.product;a&&!a.hasIn(["comment",n])&&this.props.loadComment(this.context.shopId,this.context.itemId,n),this.setState({selectedPage:e}),window.scrollTo(0,Object(h.e)(this._view).top)}},{key:"handleCommentSuccess",value:function(){this._commentBox.resetContent(),this.setState({selectedPage:0}),window.scrollTo(0,Object(h.e)(this._view).top)}},{key:"handleSubmitComment",value:function(){var e=this._commentBox.getCommentContent(),t=[];for(var n in this.uploadImages)this.uploadImages.hasOwnProperty(n)&&t.push(this.uploadImages[n]);this.props.commentItem(this.context.shopId,this.context.itemId,e.content,JSON.stringify(e.mentioned),t,this.handleCommentSuccess)}},{key:"handleReplyClick",value:function(e){this._commentBox.replyComment(e)}},{key:"handleDeleteClick",value:function(e){this.props.deleteComment(this.context.shopId,this.context.itemId,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.accountStore,a=t.product,o=a?a.get("comment"):null,l=o?o.getIn([0,"count_all"])-o.getIn([0,"count_review"]):0,c=o&&0===l,h=Math.floor((l-1)/s.b)+1,m=this.state.selectedPage*s.b,f=Math.floor(m/s.a),b=m-f*s.a,g=o?o.getIn([f,"comments"]):null,v=g?g.map(function(e){return{username:e.get("username"),userid:e.get("userid"),avatar:e.get("author_pic")}}).toJS():[],_=[],y=g?v.reduce(function(e,t){return _.includes(t.username)||(_.push(t.username),e.push(t)),e},[]):[];return y=n?y.filter(function(e){return e.username!==n.get("username")}):y,r.a.createElement("div",{className:"shopee-product-comments-view",ref:function(t){e._view=t}},c?r.a.createElement("div",{className:"shopee-product-comments-view__no-data"},r.a.createElement("div",{className:"shopee-product-comments-view__no-data__icon shopee-product-comments-view__no-comment-icon"}),r.a.createElement("div",{className:"shopee-product-comments-view__no-data__text"},Object(i.b)("text_no_comments"))):r.a.createElement("div",null,!!g&&r.a.createElement("div",{className:"shopee-product-comment-list"},g.slice(b,b+s.b).map(function(t){return r.a.createElement(T,{key:t.get("cmtid"),onReplyClick:e.handleReplyClick,onDeleteClick:e.handleDeleteClick,comment:t,loggedInUser:n})})),r.a.createElement(d.a,{totalPageCount:h,selectedPage:this.state.selectedPage,onPageSelected:this.handlePageSelected})),r.a.createElement(p.a,{ref:function(t){return e._commentBox=t},placeholder:Object(i.b)("text_leave_a_comment"),loggedInUser:n,mentionableUsers:y}),r.a.createElement("div",{className:"shopee-product-comments-view__buttons"},r.a.createElement(u.a,{size:"m",onClick:this.handleSubmitComment},Object(i.b)("label_submit"))))}}]),t}(),M=A;A.contextTypes={shopId:c.a.number,itemId:c.a.number};var R=n(8),U=n(292),D=n(66),B=(n(1681),n(1648)),F=n(1943),H=n(1700),z=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var W=D.a.DISPLAY_DAYS_TO_SHIP_IN_PRODUCT_INFO;function K(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];if(e.length>=1){var a=Object(E.e)(e[0].catid,e[0].name),o=e[0].name;n.push(t?o:r.a.createElement(m.a,{className:"shopee-product-detail__category",to:a,key:n.length},o))}if(e.length>=2){n.push(r.a.createElement(U.a,{key:n.length}));var s=Object(E.f)(e[0].catid,e[1].catid,e[1].name),l=e[1].name;n.push(t?l:r.a.createElement(m.a,{className:"shopee-product-detail__category",to:s,key:n.length},l))}if(3===e.length){var c=Object(E.kb)(e[0].catid,e[1].catid,e[2].name,e[2].catid),u=e[2].name;n.push(r.a.createElement(U.a,{key:n.length})),n.push(t?u:r.a.createElement(m.a,{className:"shopee-product-detail__category",to:c,key:n.length},u))}return{label:Object(i.b)("label_category"),value:r.a.createElement("span",{className:"shopee-product-detail__category-path"},n)}}var V=/[-[\]/{}()*+?.\\^$|]/g;function Y(e){return"("+e.replace(V,"\\$&")+")"}function G(e,t){return t&&e?t.length-e.length:-1}var J=function(e){var t=e.productInfo,n=t?t.get("description"):"",a=t?t.get("hashtag_list"):null,o=[],i=0;if(n&&a&&a.size>0)for(var s=function(e){var t=(e=e.sort(G)).map(Y);return new RegExp(t.join("|"),"gi")}(a),l=s.exec(n);l;){var c=l[0],u=l.index;l.lastIndex!==i&&o.push(r.a.createElement("span",{key:o.length},n.substring(i,u))),o.push(r.a.createElement(m.a,{className:"shopee-product-detail__hash-tag",key:o.length,to:Object(E.Z)(c)},c)),i=u+c.length,l=s.exec(n)}return n&&i<n.length&&o.push(r.a.createElement("span",{key:o.length},n.substring(i,n.length))),r.a.createElement("div",{className:"shopee-product-detail__description"},o)},X=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),z(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.productInfo,a=t.shopInfo,o=t.fullCategoryList,l=t.isOwner,c=n&&o?Object(F.a)(n,o):[],u=n&&function(e){return 0!==(e.get("attributes")||Object(R.List)()).size}(n);return r.a.createElement("div",{ref:function(t){e._detailView=t},className:"shopee-product-detail"},r.a.createElement(J,{productInfo:n}),u&&r.a.createElement("div",{className:"shopee-product-detail__parameters"},function(e,t){var n=[],a=e.get("attributes",Object(R.List)()),o=e.get("is_category_failed",!1);return n.push(K(t,o)),a.forEach(function(e){var t=e.get("value"),a=e.get("name"),o=e.get("is_pending_qc"),i=!e.get("is_timestamp")&&!o;if(t&&a){if(e.get("is_timestamp",!1)){var s={label:a,value:t=Object(B.c)(t)};return void n.push(s)}n.push({label:a,value:i?r.a.createElement(m.a,{className:"shopee-product-detail__attribute-link",to:Object(E.W)(e.get("id"),a,t)},"brand"===a.toLowerCase()&&r.a.createElement("meta",{itemProp:"brand",content:t}),t):t})}}),n}(n,c).map(function(e){return r.a.createElement("div",{className:"shopee-product-detail__parameters__row",key:e.label},!!e.seoMeta&&r.a.createElement("meta",e.seoMeta),r.a.createElement("div",{className:"shopee-product-detail__parameters__head"},e.label+":"),r.a.createElement("div",{className:"shopee-product-detail__parameters__content"},e.value))})),n?r.a.createElement("div",{className:"shopee-product-detail__parameters"},function(e,t,n,a,r){var o=[],l=e.get("condition"),c=e.get("estimated_days"),u=e.get("stock"),d=n?n.get("place"):null,h=e.get("brand"),p=e.get("is_category_failed",!1);return a||(o.push(K(t,p)),h&&o.push({label:Object(i.b)("label_brand"),value:h,seoMeta:{itemProp:"brand",content:h}})),l>0&&o.push({label:Object(i.b)("label_condition"),value:Object(i.b)(s.e[l])}),Object(H.a)(e.get("shopid"))&&!r||o.push({label:Object(i.b)("label_stock"),value:u}),W&&o.push({label:Object(i.b)("label_days_to_ship"),value:Object(i.b)("label_n_days",{count:c})}),d&&o.push({label:Object(i.b)("label_shipping_from"),value:d}),o}(n,c,a,u,l).map(function(e){return r.a.createElement("div",{className:"shopee-product-detail__parameters__row",key:e.label},!!e.seoMeta&&r.a.createElement("meta",e.seoMeta),r.a.createElement("div",{className:"shopee-product-detail__parameters__head"},e.label+":"),r.a.createElement("div",{className:"shopee-product-detail__parameters__content"},e.value))})):null)}}]),t}(),q=n(1947),$=n(2041),Z=n(1946),Q=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var ee=new b.a;ee.locale.set("VN");var te=function(e){var t=e.authorId,n=e.authorPic,a=e.authorName;return r.a.createElement("div",{className:"shopee-product-rating__avatar"},-1!==t?r.a.createElement(g.a,{imgSrc:Object(v.c)(n,!0)}):r.a.createElement(m.a,{to:Object(E.fb)(t,a)},r.a.createElement(g.a,{imgSrc:Object(v.c)(n,!0)})))},ne=function(e){var t=e.authorId,n=e.authorName;return-1===t?r.a.createElement("div",{className:"shopee-product-rating__author-name"},null===n?Object(i.b)("text_shopee_user"):n):r.a.createElement(m.a,{to:Object(E.fb)(t,n),className:"shopee-product-rating__author-name"},null===n?Object(i.b)("text_shopee_user"):n)},ae=function(e){var t=e.star;return r.a.createElement("div",{className:"shopee-product-rating__rating"},[1,2,3,4,5].map(function(e,n){return n<t?r.a.createElement(k.a,{key:n,classNames:["icon-rating-solid--active"]}):r.a.createElement(C.a,{key:n})}))},re=function(e){var t=e.content;return r.a.createElement("div",{className:"shopee-product-rating__content"},t)},oe=function(e){var t=e.images;return r.a.createElement("div",{className:"product-comment-item__image-list-wrapper"},r.a.createElement(q.a,{urlList:t.toJS()}))},ie=function(e){var t=e.models,n=e.modelId,a=e.commentTime,o=t.find(function(e){return e.get("modelid")===n}),i=o?o.get("name"):"";return r.a.createElement("div",{className:"shopee-product-rating__time"},i?a+" | "+i:a)},se=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showReplyDialog:!1,serverError:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),Q(t,[{key:"openReply",value:function(){this.setState({showReplyDialog:!0})}},{key:"closeReply",value:function(){this.setState({showReplyDialog:!1})}},{key:"uiReplyCallback",value:function(e){e?this.setState({replyError:"msg_reply_text_too_long"}):this.closeReply()}},{key:"render",value:function(){var e=this.props,t=e.rating,n=e.loggedInUser,a=e.onReplyRating,o=t.get("shopid")===n.get("shopid"),s=!!t.getIn(["ItemRatingReply","comment"]);return r.a.createElement("div",{className:"shopee-product-rating"},r.a.createElement(te,{authorId:t.get("authorid"),authorPic:t.get("author_pic"),authorName:t.get("username")}),r.a.createElement("div",{className:"shopee-product-rating__main"},r.a.createElement(ne,{authorId:t.get("authorid"),authorName:t.get("username")}),r.a.createElement(ae,{star:t.get("rating_star")}),r.a.createElement(re,{content:t.get("comment")}),t.get("images")&&0!==t.get("images").size&&r.a.createElement(oe,{images:t.get("images")}),r.a.createElement(ie,{models:t.getIn(["product_items",0,"models"]),modelId:t.get("modelid"),commentTime:ee.create(t.get("ctime"),"s").format("YYYY-MM-DD hh:mm")}),s&&r.a.createElement(Z.a,{response:t.get("ItemRatingReply").get("comment")}),this.state.showReplyDialog&&r.a.createElement($.a,{onClickSave:a.bind(this,this.uiReplyCallback.bind(this)),onClickCancel:this.closeReply.bind(this),error:this.state.replyError})),r.a.createElement("div",{className:"shopee-product-rating__buttons"},o&&!s&&!this.state.showReplyDialog&&r.a.createElement(_.b,{classnames:["shopee-product-rating__button--reply"],modifiers:["primary"],onClick:this.openReply.bind(this)},Object(i.b)("label_reply"))))}}]),t}(),le=n(1676),ce=function(e){var t=e.ratingScore,n=e.ratingCountForStarsInArray,a=e.ratingCountForFiltersInArray,o=e.selectedGenericFilter,l=e.onPageParamsChanged,c=[{value:1,classModifier:function(e){return 1===e?["active","all"]:["all"]},label:Object(i.b)("label_all")},{value:64,label:Object(i.b)("label_with_comment")+" ("+a[1]+")",classModifier:function(e){return 64===e?["active","with-comment"]:["with-comment"]}},{value:128,label:Object(i.b)("label_with_photo")+" ("+a[2]+")",classModifier:function(e){return 128===e?["active","with-photo"]:["with-photo"]}}];return[4,3,2,1,0].map(function(e){c.push({value:2<<e,label:e+1+" "+Object(i.b)("label_rating_star")+" ("+n[e+1]+")",classModifier:function(t){return t===2<<e?["active"]:[]}})}),r.a.createElement("div",{className:"shopee-product-rating-overview"},r.a.createElement("div",{className:"shopee-product-rating-overview__section-1"},r.a.createElement("div",{className:"shopee-product-rating-overview__score-wrapper"},r.a.createElement(le.b,{rating:t}),r.a.createElement("div",{className:"shopee-product-rating-overview__text-overview"},Object(i.b)("text_n_out_of_m",{n:t%1==0?t:t&&t.toFixed(1),m:5})+" "))),r.a.createElement("div",{className:"shopee-product-rating-overview__section-2"},c.map(function(e){return r.a.createElement("div",{key:e.value,onClick:function(){l({tab:s.f.RATING,genericFilter:e.value})},className:Object(v.b)("shopee-product-rating-overview__filter",e.classModifier(o))},e.label)})))};ce.contextTypes={itemId:c.a.number,shopId:c.a.number};var ue=ce,de=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var he=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedPage:0},n.handlePageSelected=n.handlePageSelected.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),de(t,[{key:"componentWillReceiveProps",value:function(e){e.pageParams!==this.props.pageParams&&this.setState({selectedPage:0})}},{key:"handlePageSelected",value:function(e){var t=this.props,n=t.pageParams.genericFilter,a=e*s.b,r=n?parseInt(n,10):1,o=Math.floor(a/s.a);t.product&&!t.product.hasIn(["rating","ratingIdList",r,o])&&t.onLoadMoreRating(r,o),this.setState({selectedPage:e}),window.scrollTo(0,Object(h.e)(this._view).top)}},{key:"handleReplyRating",value:function(e,t,n,a,r,o,i,s){this.props.accountStore.get("shopid")===a&&!e&&this.props.replyRating(t,n,a,r,o,i,s)}},{key:"render",value:function(){var e=this,t=this.props,n=t.accountStore,a=t.product,o=t.productInfo,l=t.pageParams,c=t.onPageParamsChanged,u=o&&o.get("rating_count"),h=o?o.get("rating_star"):0,p=l.genericFilter?parseInt(l.genericFilter,10):1,m=Object(F.b)(p),f=m.filter,b=m.star,g=u?u.get(b):0,v=u?u.toJS():[0,0,0,0,0,0],_=[0,o?o.get("rcount_with_context"):0,o?o.get("rcount_with_image"):0],y=0!==f?_[f]:g,E=o&&0===v.reduce(function(e,t){return e+t})&&0===_.reduce(function(e,t){return e+t},0),w=o&&0===y,N=Math.floor((y-1)/s.b)+1,C=this.state.selectedPage*s.b,O=Math.floor(C/s.a),k=C-O*s.a,x=a?a.getIn(["ratingIdList",p,O]):null,I=x?x.map(function(e){return a.getIn(["ratingDetail",""+e],null)}):null;return r.a.createElement("div",{className:"shopee-product-comments-view",ref:function(t){e._view=t}},E?null:r.a.createElement(ue,{ratingScore:h,ratingCountForStarsInArray:v,ratingCountForFiltersInArray:_,selectedGenericFilter:p,onPageParamsChanged:c}),w?r.a.createElement("div",{className:"shopee-product-comments-view__no-data"},r.a.createElement("div",{className:"shopee-product-comments-view__no-data__icon shopee-product-comments-view__no-rating-icon"}),r.a.createElement("div",{className:"shopee-product-comments-view__no-data__text"},i.a.t("text_no_ratings"))):r.a.createElement("div",null,I?r.a.createElement("div",{className:"shopee-product-comment-list"},I.slice(k,k+s.b).map(function(t){return t&&r.a.createElement(se,{key:t.get("cmtid"),rating:t,loggedInUser:n,onReplyRating:e.handleReplyRating.bind(e,!!t.getIn(["ItemRatingReply","cmtid"]),t.get("orderid"),t.get("cmtid"),t.get("shopid"),t.get("itemid"),t.get("modelid"))})})):null,r.a.createElement(d.a,{totalPageCount:N,selectedPage:this.state.selectedPage,onPageSelected:this.handlePageSelected})))}}]),t}();function pe(e){var t=e.product,n=e.productInfo,a=e.accountStore,l=e.onPageParamsChange,c=e.pageParams,u=e.shopInfo,d=e.fullCategoryList,h=e.onLoadMoreRating,p=e.replyRating,m=e.deleteProductComment,f=e.loadProductComment,b=e.commentItem,g=e.isOwner,v=n&&n.getIn(["rating_count",0])||0,_=n?n.get("cmt_count")-v:0,y=c.tab?s.g[c.tab]:0;return r.a.createElement(o.a,{tabs:[{header:r.a.createElement("div",{className:"product-page__tab-link",onClick:function(){l({tab:s.f.DETAIL})}},Object(i.b)("label_product_detail")),content:r.a.createElement(X,{productInfo:n,shopInfo:u,fullCategoryList:d,isOwner:g})},{header:r.a.createElement("div",{className:"product-page__tab-link",onClick:function(){l({tab:s.f.RATING})}},Object(i.b)("label_product_rating")+" ("+v+")"),content:r.a.createElement(he,{onLoadMoreRating:h,accountStore:a,onPageParamsChanged:l,pageParams:c,productInfo:n,product:t,replyRating:p})},{header:r.a.createElement("div",{className:"product-page__tab-link",onClick:function(){l({tab:s.f.COMMENT})}},Object(i.b)("label_product_comment")+" ("+_+")"),content:r.a.createElement(M,{product:t,accountStore:a,productInfo:n,deleteComment:m,loadComment:f,commentItem:b})}],tabIndex:y})}n.d(t,"default",function(){return pe})}}]);
//# sourceMappingURL=https://shopee.vn/assets/ProductPageDetailRatingComment.e181f9391ae890cd6d05.js.map